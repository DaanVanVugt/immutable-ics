(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
	typeof define === 'function' && define.amd ? define(['exports'], factory) :
	(factory((global['immutable-ics'] = {})));
}(this, (function (exports) { 'use strict';

var commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};





function createCommonjsModule(fn, module) {
	return module = { exports: {} }, fn(module, module.exports), module.exports;
}

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) {
  return typeof obj;
} : function (obj) {
  return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
};











var classCallCheck = function (instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
};

var createClass = function () {
  function defineProperties(target, props) {
    for (var i = 0; i < props.length; i++) {
      var descriptor = props[i];
      descriptor.enumerable = descriptor.enumerable || false;
      descriptor.configurable = true;
      if ("value" in descriptor) descriptor.writable = true;
      Object.defineProperty(target, descriptor.key, descriptor);
    }
  }

  return function (Constructor, protoProps, staticProps) {
    if (protoProps) defineProperties(Constructor.prototype, protoProps);
    if (staticProps) defineProperties(Constructor, staticProps);
    return Constructor;
  };
}();









var inherits = function (subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function, not " + typeof superClass);
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      enumerable: false,
      writable: true,
      configurable: true
    }
  });
  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
};











var possibleConstructorReturn = function (self, call) {
  if (!self) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return call && (typeof call === "object" || typeof call === "function") ? call : self;
};





var slicedToArray = function () {
  function sliceIterator(arr, i) {
    var _arr = [];
    var _n = true;
    var _d = false;
    var _e = undefined;

    try {
      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {
        _arr.push(_s.value);

        if (i && _arr.length === i) break;
      }
    } catch (err) {
      _d = true;
      _e = err;
    } finally {
      try {
        if (!_n && _i["return"]) _i["return"]();
      } finally {
        if (_d) throw _e;
      }
    }

    return _arr;
  }

  return function (arr, i) {
    if (Array.isArray(arr)) {
      return arr;
    } else if (Symbol.iterator in Object(arr)) {
      return sliceIterator(arr, i);
    } else {
      throw new TypeError("Invalid attempt to destructure non-iterable instance");
    }
  };
}();













var toConsumableArray = function (arr) {
  if (Array.isArray(arr)) {
    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];

    return arr2;
  } else {
    return Array.from(arr);
  }
};

var immutable=createCommonjsModule(function(e){(function(t,r){e.exports=r();})(commonjsGlobal,function(){'use strict';function e(e,t){t&&(e.prototype=Object.create(t.prototype)),e.prototype.constructor=e;}function t(e){return i(e)?e:M(e)}function r(e){return p(e)?e:k(e)}function o(e){return n(e)?e:O(e)}function a(e){return i(e)&&!s(e)?e:A(e)}function i(e){return!!(e&&e[lr])}function p(e){return!!(e&&e[yr])}function n(e){return!!(e&&e[dr])}function s(e){return p(e)||n(e)}function l(e){return!!(e&&e[cr])}function _(e){return e.value=!1,e}function y(e){e&&(e.value=!0);}function d(){}function c(e,t){t=t||0;for(var r=nr(0,e.length-t),o=Array(r),a=0;a<r;a++)o[a]=e[a+t];return o}function u(e){return void 0===e.size&&(e.size=e.__iterate(m)),e.size}function h(e,t){if('number'!=typeof t){var r=t>>>0;if(''+r!==t||4294967295==r)return NaN;t=r;}return 0>t?u(e)+t:t}function m(){return!0}function g(e,t,r){return(0===e||r!==void 0&&e<=-r)&&(t===void 0||r!==void 0&&t>=r)}function S(e,t){return f(e,t,0)}function I(e,t){return f(e,t,t)}function f(e,t,r){return e===void 0?r:0>e?nr(0,t+e):t===void 0?e:Math.min(t,e)}function E(e){this.next=e;}function z(e,t,r,o){var a=0===e?t:1===e?r:[t,r];return o?o.value=a:o={value:a,done:!1},o}function w(){return{value:void 0,done:!0}}function v(e){return!!q(e)}function D(e){return e&&'function'==typeof e.next}function x(e){var t=q(e);return t&&t.call(e)}function q(e){var t=e&&(wr&&e[wr]||e[Dr]);if('function'==typeof t)return t}function b(e){return e&&'number'==typeof e.length}function M(e){return null===e||e===void 0?U():i(e)?e.toSeq():W(e)}function k(e){return null===e||e===void 0?U().toKeyedSeq():i(e)?p(e)?e.toSeq():e.fromEntrySeq():B(e)}function O(e){return null===e||e===void 0?U():i(e)?p(e)?e.entrySeq():e.toIndexedSeq():j(e)}function A(e){return(null===e||e===void 0?U():i(e)?p(e)?e.entrySeq():e:j(e)).toSetSeq()}function L(e){this._array=e,this.size=e.length;}function T(e){var t=Object.keys(e);this._object=e,this._keys=t,this.size=t.length;}function R(e){this._iterable=e,this.size=e.length||e.size;}function N(e){this._iterator=e,this._iteratorCache=[];}function K(e){return!!(e&&e[qr])}function U(){return br||(br=new L([]))}function B(e){var t=Array.isArray(e)?new L(e).fromEntrySeq():D(e)?new N(e).fromEntrySeq():v(e)?new R(e).fromEntrySeq():'object'===('undefined'==typeof e?'undefined':_typeof(e))?new T(e):void 0;if(!t)throw new TypeError('Expected Array or iterable object of [k, v] entries, or keyed object: '+e);return t}function j(e){var t=H(e);if(!t)throw new TypeError('Expected Array or iterable object of values: '+e);return t}function W(e){var t=H(e)||'object'===('undefined'==typeof e?'undefined':_typeof(e))&&new T(e);if(!t)throw new TypeError('Expected Array or iterable object of values, or keyed object: '+e);return t}function H(e){return b(e)?new L(e):D(e)?new N(e):v(e)?new R(e):void 0}function C(e,t,r,o){var a=e._cache;if(a){for(var _,i=a.length-1,p=0;p<=i;p++)if(_=a[r?i-p:p],!1===t(_[1],o?_[0]:p,e))return p+1;return p}return e.__iterateUncached(t,r)}function Y(e,t,r,o){var a=e._cache;if(a){var _=a.length-1,i=0;return new E(function(){var e=a[r?_-i:i];return i++>_?w():z(t,o?e[0]:i-1,e[1])})}return e.__iteratorUncached(t,r)}function P(e,t){return t?J(t,e,'',{"":e}):V(e)}function J(e,t,r,o){return Array.isArray(t)?e.call(o,r,O(t).map(function(r,o){return J(e,r,o,t)})):X(t)?e.call(o,r,k(t).map(function(r,o){return J(e,r,o,t)})):t}function V(e){return Array.isArray(e)?O(e).map(V).toList():X(e)?k(e).map(V).toMap():e}function X(e){return e&&(e.constructor===Object||e.constructor===void 0)}function Q(e,t){if(e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1;if('function'==typeof e.valueOf&&'function'==typeof t.valueOf){if(e=e.valueOf(),t=t.valueOf(),e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1}return'function'==typeof e.equals&&'function'==typeof t.equals&&e.equals(t)}function F(e,t){if(e===t)return!0;if(!i(t)||void 0!==e.size&&void 0!==t.size&&e.size!==t.size||void 0!==e.__hash&&void 0!==t.__hash&&e.__hash!==t.__hash||p(e)!==p(t)||n(e)!==n(t)||l(e)!==l(t))return!1;if(0===e.size&&0===t.size)return!0;var r=!s(e);if(l(e)){var o=e.entries();return t.every(function(e,t){var a=o.next().value;return a&&Q(a[1],e)&&(r||Q(a[0],t))})&&o.next().done}var a=!1;if(e.size===void 0)if(void 0===t.size)'function'==typeof e.cacheResult&&e.cacheResult();else{a=!0;var y=e;e=t,t=y;}var _=!0,d=t.__iterate(function(t,o){if(r?!e.has(t):a?!Q(t,e.get(o,Sr)):!Q(e.get(o,Sr),t))return _=!1,!1});return _&&e.size===d}function G(e,t){if(!(this instanceof G))return new G(e,t);if(this._value=e,this.size=void 0===t?Infinity:nr(0,t),0===this.size){if(Mr)return Mr;Mr=this;}}function Z(e,t){if(!e)throw new Error(t)}function $(e,t,r){if(!(this instanceof $))return new $(e,t,r);if(Z(0!==r,'Cannot step a Range by 0'),e=e||0,void 0===t&&(t=Infinity),r=void 0===r?1:Math.abs(r),t<e&&(r=-r),this._start=e,this._end=t,this._step=r,this.size=nr(0,Math.ceil((t-e)/r-1)+1),0===this.size){if(kr)return kr;kr=this;}}function ee(){throw TypeError('Abstract')}function te(){}function re(){}function oe(){}function ae(e){return 1073741824&e>>>1|3221225471&e}function _e(e){if(!1===e||null===e||e===void 0)return 0;if('function'==typeof e.valueOf&&(e=e.valueOf(),!1===e||null===e||void 0===e))return 0;if(!0===e)return 1;var t='undefined'==typeof e?'undefined':_typeof(e);if('number'===t){if(e!==e||e===Infinity)return 0;var r=0|e;for(r!==e&&(r^=4294967295*e);4294967295<e;)e/=4294967295,r^=e;return ae(r)}if('string'===t)return e.length>Ur?ie(e):pe(e);if('function'==typeof e.hashCode)return e.hashCode();if('object'===t)return ne(e);if('function'==typeof e.toString)return pe(e.toString());throw new Error('Value type '+t+' cannot be hashed.')}function ie(e){var t=Wr[e];return void 0===t&&(t=pe(e),jr===Br&&(jr=0,Wr={}),jr++,Wr[e]=t),t}function pe(e){for(var t=0,r=0;r<e.length;r++)t=0|31*t+e.charCodeAt(r);return ae(t)}function ne(e){var t;if(Rr&&(t=Or.get(e),void 0!==t))return t;if(t=e[Kr],void 0!==t)return t;if(!Tr){if(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[Kr],void 0!==t)return t;if(t=se(e),void 0!==t)return t}if(t=++Nr,1073741824&Nr&&(Nr=0),Rr)Or.set(e,t);else if(void 0!==Lr&&!1===Lr(e))throw new Error('Non-extensible objects are not allowed as keys.');else if(Tr)Object.defineProperty(e,Kr,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(void 0!==e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[Kr]=t;else if(void 0!==e.nodeType)e[Kr]=t;else throw new Error('Unable to set a non-enumerable property on object.');return t}function se(e){if(e&&0<e.nodeType)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID;}}function le(e){Z(e!==Infinity,'Cannot perform this action with an infinite size.');}function ye(e){return null===e||e===void 0?ze():de(e)&&!l(e)?e:ze().withMutations(function(t){var o=r(e);le(o.size),o.forEach(function(e,r){return t.set(r,e)});})}function de(e){return!!(e&&e[Hr])}function ce(e,t){this.ownerID=e,this.entries=t;}function ue(e,t,r){this.ownerID=e,this.bitmap=t,this.nodes=r;}function he(e,t,r){this.ownerID=e,this.count=t,this.nodes=r;}function me(e,t,r){this.ownerID=e,this.keyHash=t,this.entries=r;}function ge(e,t,r){this.ownerID=e,this.keyHash=t,this.entry=r;}function Se(e,t,r){this._type=t,this._reverse=r,this._stack=e._root&&fe(e._root);}function Ie(e,t){return z(e,t[0],t[1])}function fe(e,t){return{node:e,index:0,__prev:t}}function Ee(e,t,r,o){var a=Object.create(Cr);return a.size=e,a._root=t,a.__ownerID=r,a.__hash=o,a.__altered=!1,a}function ze(){return Yr||(Yr=Ee(0))}function ve(e,t,r){var o,a;if(!e._root){if(r===Sr)return e;a=1,o=new ce(e.__ownerID,[[t,r]]);}else{var i=_(Ir),p=_(fr);if(o=we(e._root,e.__ownerID,0,void 0,t,r,i,p),!p.value)return e;a=e.size+(i.value?r===Sr?-1:1:0);}return e.__ownerID?(e.size=a,e._root=o,e.__hash=void 0,e.__altered=!0,e):o?Ee(a,o):ze()}function we(e,t,r,o,a,_,i,p){return e?e.update(t,r,o,a,_,i,p):_===Sr?e:(y(p),y(i),new ge(t,o,[a,_]))}function De(e){return e.constructor===ge||e.constructor===me}function xe(e,t,r,o,a){if(e.keyHash===o)return new me(t,o,[e.entry,a]);var _,i=(0===r?e.keyHash:e.keyHash>>>r)&gr,p=(0===r?o:o>>>r)&gr,n=i==p?[xe(e,t,r+hr,o,a)]:(_=new ge(t,o,a),i<p?[e,_]:[_,e]);return new ue(t,1<<i|1<<p,n)}function qe(e,t,r,o){e||(e=new d);for(var a,_=new ge(e,_e(r),[r,o]),i=0;i<t.length;i++)a=t[i],_=_.update(e,0,void 0,a[0],a[1]);return _}function be(e,t,r,o){for(var a,_=0,i=0,p=Array(r),n=0,s=1,l=t.length;n<l;n++,s<<=1)a=t[n],void 0!==a&&n!==o&&(_|=s,p[i++]=a);return new ue(e,_,p)}function Me(e,t,r,o,a){for(var _=0,i=Array(mr),p=0;0!==r;p++,r>>>=1)i[p]=1&r?t[_++]:void 0;return i[o]=a,new he(e,_+1,i)}function ke(e,t,o){for(var a=[],_=0;_<o.length;_++){var p=o[_],n=r(p);i(p)||(n=n.map(function(e){return P(e)})),a.push(n);}return Le(e,t,a)}function Oe(e,t){return e&&e.mergeDeep&&i(t)?e.mergeDeep(t):Q(e,t)?e:t}function Ae(e){return function(t,r,o){if(t&&t.mergeDeepWith&&i(r))return t.mergeDeepWith(e,r);var a=e(t,r,o);return Q(t,a)?t:a}}function Le(e,t,r){return r=r.filter(function(e){return 0!==e.size}),0===r.length?e:0!==e.size||e.__ownerID||1!==r.length?e.withMutations(function(e){for(var o=t?function(r,o){e.update(o,Sr,function(e){return e===Sr?r:t(e,r,o)});}:function(t,r){e.set(r,t);},a=0;a<r.length;a++)r[a].forEach(o);}):e.constructor(r[0])}function Te(e,t,r,o){var a=e===Sr,_=t.next();if(_.done){var i=a?r:e,p=o(i);return p===i?e:p}Z(a||e&&e.set,'invalid keyPath');var n=_.value,s=a?Sr:e.get(n,Sr),l=Te(s,t,r,o);return l===s?e:l===Sr?e.remove(n):(a?ze():e).set(n,l)}function Re(e){return e-=1431655765&e>>1,e=(858993459&e)+(858993459&e>>2),e=252645135&e+(e>>4),e+=e>>8,e+=e>>16,127&e}function Ne(e,t,r,o){var a=o?e:c(e);return a[t]=r,a}function Ke(e,t,r,o){var a=e.length+1;if(o&&t+1===a)return e[t]=r,e;for(var _=Array(a),i=0,p=0;p<a;p++)p===t?(_[p]=r,i=-1):_[p]=e[p+i];return _}function Ue(e,t,r){var o=e.length-1;if(r&&t===o)return e.pop(),e;for(var a=Array(o),_=0,i=0;i<o;i++)i===t&&(_=1),a[i]=e[i+_];return a}function Be(e){var t=Ye();if(null===e||void 0===e)return t;if(je(e))return e;var r=o(e),a=r.size;return 0===a?t:(le(a),0<a&&a<mr?Ce(0,a,hr,null,new We(r.toArray())):t.withMutations(function(e){e.setSize(a),r.forEach(function(t,r){return e.set(r,t)});}))}function je(e){return!!(e&&e[Xr])}function We(e,t){this.array=e,this.ownerID=t;}function He(e,t){function r(e,t,r){return 0===t?o(e,r):a(e,t,r)}function o(e,r){var o=r===p?n&&n.array:e&&e.array,a=r>_?0:_-r,s=i-r;return s>mr&&(s=mr),function(){if(a==s)return Gr;var e=t?--s:a++;return o&&o[e]}}function a(e,o,a){var p,n=e&&e.array,s=a>_?0:_-a>>o,l=(i-a>>o)+1;return l>mr&&(l=mr),function(){do{if(p){var e=p();if(e!==Gr)return e;p=null;}if(s==l)return Gr;var _=t?--l:s++;p=r(n&&n[_],o-hr,a+(_<<o));}while(!0)}}var _=e._origin,i=e._capacity,p=Ge(i),n=e._tail;return r(e._root,e._level,0)}function Ce(e,t,r,o,a,_,i){var p=Object.create(Qr);return p.size=t-e,p._origin=e,p._capacity=t,p._level=r,p._root=o,p._tail=a,p.__ownerID=_,p.__hash=i,p.__altered=!1,p}function Ye(){return Fr||(Fr=Ce(0,0,hr))}function Pe(e,t,r){if(t=h(e,t),t!==t)return e;if(t>=e.size||0>t)return e.withMutations(function(e){0>t?Qe(e,t).set(0,r):Qe(e,0,t+1).set(t,r);});t+=e._origin;var o=e._tail,a=e._root,i=_(fr);return t>=Ge(e._capacity)?o=Je(o,e.__ownerID,0,t,r,i):a=Je(a,e.__ownerID,e._level,t,r,i),i.value?e.__ownerID?(e._root=a,e._tail=o,e.__hash=void 0,e.__altered=!0,e):Ce(e._origin,e._capacity,e._level,a,o):e}function Je(e,t,r,o,a,_){var i=o>>>r&gr,p=e&&i<e.array.length;if(!p&&void 0===a)return e;var n;if(0<r){var s=e&&e.array[i],l=Je(s,t,r-hr,o,a,_);return l===s?e:(n=Ve(e,t),n.array[i]=l,n)}return p&&e.array[i]===a?e:(y(_),n=Ve(e,t),void 0===a&&i==n.array.length-1?n.array.pop():n.array[i]=a,n)}function Ve(e,t){return t&&e&&t===e.ownerID?e:new We(e?e.array.slice():[],t)}function Xe(e,t){if(t>=Ge(e._capacity))return e._tail;if(t<1<<e._level+hr){for(var r=e._root,o=e._level;r&&0<o;)r=r.array[t>>>o&gr],o-=hr;return r}}function Qe(e,t,r){void 0!==t&&(t|=0),void 0!==r&&(r|=0);var o=e.__ownerID||new d,a=e._origin,_=e._capacity,i=a+t,p=void 0===r?_:0>r?_+r:a+r;if(i===a&&p===_)return e;if(i>=p)return e.clear();for(var n=e._level,s=e._root,l=0;0>i+l;)s=new We(s&&s.array.length?[void 0,s]:[],o),n+=hr,l+=1<<n;l&&(i+=l,a+=l,p+=l,_+=l);for(var y=Ge(_),c=Ge(p);c>=1<<n+hr;)s=new We(s&&s.array.length?[s]:[],o),n+=hr;var u=e._tail,h=c<y?Xe(e,p-1):c>y?new We([],o):u;if(u&&c>y&&i<_&&u.array.length){s=Ve(s,o);for(var m,g=s,S=n;S>hr;S-=hr)m=y>>>S&gr,g=g.array[m]=Ve(g.array[m],o);g.array[y>>>hr&gr]=u;}if(p<_&&(h=h&&h.removeAfter(o,0,p)),i>=c)i-=c,p-=c,n=hr,s=null,h=h&&h.removeBefore(o,0,i);else if(i>a||c<y){for(l=0;s;){var I=i>>>n&gr;if(I!=c>>>n&gr)break;I&&(l+=(1<<n)*I),n-=hr,s=s.array[I];}s&&i>a&&(s=s.removeBefore(o,n,i-l)),s&&c<y&&(s=s.removeAfter(o,n,c-l)),l&&(i-=l,p-=l);}return e.__ownerID?(e.size=p-i,e._origin=i,e._capacity=p,e._level=n,e._root=s,e._tail=h,e.__hash=void 0,e.__altered=!0,e):Ce(i,p,n,s,h)}function Fe(e,t,r){for(var a=[],_=0,p=0;p<r.length;p++){var n=r[p],s=o(n);s.size>_&&(_=s.size),i(n)||(s=s.map(function(e){return P(e)})),a.push(s);}return _>e.size&&(e=e.setSize(_)),Le(e,t,a)}function Ge(e){return e<mr?0:e-1>>>hr<<hr}function Ze(e){return null===e||e===void 0?tt():$e(e)?e:tt().withMutations(function(t){var o=r(e);le(o.size),o.forEach(function(e,r){return t.set(r,e)});})}function $e(e){return de(e)&&l(e)}function et(e,t,r,o){var a=Object.create(Ze.prototype);return a.size=e?e.size:0,a._map=e,a._list=t,a.__ownerID=r,a.__hash=o,a}function tt(){return Zr||(Zr=et(ze(),Ye()))}function rt(e,t,r){var o,a,_=e._map,p=e._list,n=_.get(t),i=n!==void 0;if(r===Sr){if(!i)return e;p.size>=mr&&p.size>=2*_.size?(a=p.filter(function(e,t){return e!==void 0&&n!==t}),o=a.toKeyedSeq().map(function(e){return e[0]}).flip().toMap(),e.__ownerID&&(o.__ownerID=a.__ownerID=e.__ownerID)):(o=_.remove(t),a=n===p.size-1?p.pop():p.set(n,void 0));}else if(i){if(r===p.get(n)[1])return e;o=_,a=p.set(n,[t,r]);}else o=_.set(t,p.size),a=p.set(p.size,[t,r]);return e.__ownerID?(e.size=o.size,e._map=o,e._list=a,e.__hash=void 0,e):et(o,a)}function ot(e,t){this._iter=e,this._useKeys=t,this.size=e.size;}function at(e){this._iter=e,this.size=e.size;}function _t(e){this._iter=e,this.size=e.size;}function it(e){this._iter=e,this.size=e.size;}function pt(e){var t=bt(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.includes(t)},t.includes=function(t){return e.has(t)},t.cacheResult=Mt,t.__iterateUncached=function(t,r){var o=this;return e.__iterate(function(e,r){return!1!==t(r,e,o)},r)},t.__iteratorUncached=function(t,r){if(t===vr){var o=e.__iterator(t,r);return new E(function(){var e=o.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t;}return e})}return e.__iterator(t===zr?Er:zr,r)},t}function nt(e,t,r){var o=bt(e);return o.size=e.size,o.has=function(t){return e.has(t)},o.get=function(o,a){var _=e.get(o,Sr);return _===Sr?a:t.call(r,_,o,e)},o.__iterateUncached=function(o,a){var _=this;return e.__iterate(function(e,a,i){return!1!==o(t.call(r,e,a,i),a,_)},a)},o.__iteratorUncached=function(o,a){var _=e.__iterator(vr,a);return new E(function(){var a=_.next();if(a.done)return a;var i=a.value,p=i[0];return z(o,p,t.call(r,i[1],p,e),a)})},o}function st(e,t){var r=bt(e);return r._iter=e,r.size=e.size,r.reverse=function(){return e},e.flip&&(r.flip=function(){var t=pt(e);return t.reverse=function(){return e.flip()},t}),r.get=function(r,o){return e.get(t?r:-1-r,o)},r.has=function(r){return e.has(t?r:-1-r)},r.includes=function(t){return e.includes(t)},r.cacheResult=Mt,r.__iterate=function(t,r){var o=this;return e.__iterate(function(e,r){return t(e,r,o)},!r)},r.__iterator=function(t,r){return e.__iterator(t,!r)},r}function lt(e,t,r,o){var a=bt(e);return o&&(a.has=function(o){var a=e.get(o,Sr);return a!==Sr&&!!t.call(r,a,o,e)},a.get=function(o,a){var _=e.get(o,Sr);return _!==Sr&&t.call(r,_,o,e)?_:a}),a.__iterateUncached=function(a,_){var i=this,p=0;return e.__iterate(function(e,_,n){if(t.call(r,e,_,n))return p++,a(e,o?_:p-1,i)},_),p},a.__iteratorUncached=function(a,_){var i=e.__iterator(vr,_),p=0;return new E(function(){for(;;){var _=i.next();if(_.done)return _;var n=_.value,s=n[0],l=n[1];if(t.call(r,l,s,e))return z(a,o?s:p++,l,_)}})},a}function yt(e,t,r){var o=ye().asMutable();return e.__iterate(function(a,_){o.update(t.call(r,a,_,e),0,function(e){return e+1});}),o.asImmutable()}function dt(e,t,r){var o=p(e),a=(l(e)?Ze():ye()).asMutable();e.__iterate(function(_,i){a.update(t.call(r,_,i,e),function(e){return e=e||[],e.push(o?[i,_]:_),e});});var _=qt(e);return a.map(function(t){return wt(e,_(t))})}function ct(e,t,r,o){var a=e.size;if(void 0!==t&&(t|=0),void 0!==r&&(r===Infinity?r=a:r|=0),g(t,r,a))return e;var _=S(t,a),i=I(r,a);if(_!==_||i!==i)return ct(e.toSeq().cacheResult(),t,r,o);var p,n=i-_;n==n&&(p=0>n?0:n);var s=bt(e);return s.size=0===p?p:e.size&&p||void 0,!o&&K(e)&&0<=p&&(s.get=function(t,r){return t=h(this,t),0<=t&&t<p?e.get(t+_,r):r}),s.__iterateUncached=function(t,r){var a=this;if(0===p)return 0;if(r)return this.cacheResult().__iterate(t,r);var i=0,n=!0,s=0;return e.__iterate(function(e,r){if(!(n&&(n=i++<_)))return s++,!1!==t(e,o?r:s-1,a)&&s!==p}),s},s.__iteratorUncached=function(t,r){if(0!==p&&r)return this.cacheResult().__iterator(t,r);var a=0!==p&&e.__iterator(t,r),i=0,n=0;return new E(function(){for(;i++<_;)a.next();if(++n>p)return w();var e=a.next();return o||t===zr?e:t===Er?z(t,n-1,void 0,e):z(t,n-1,e.value[1],e)})},s}function ut(e,t,r){var o=bt(e);return o.__iterateUncached=function(o,a){var _=this;if(a)return this.cacheResult().__iterate(o,a);var i=0;return e.__iterate(function(e,a,p){return t.call(r,e,a,p)&&++i&&o(e,a,_)}),i},o.__iteratorUncached=function(o,a){var _=this;if(a)return this.cacheResult().__iterator(o,a);var i=e.__iterator(vr,a),p=!0;return new E(function(){if(!p)return w();var e=i.next();if(e.done)return e;var a=e.value,n=a[0],s=a[1];return t.call(r,s,n,_)?o===vr?e:z(o,n,s,e):(p=!1,w())})},o}function ht(e,t,r,o){var a=bt(e);return a.__iterateUncached=function(a,_){var i=this;if(_)return this.cacheResult().__iterate(a,_);var p=!0,n=0;return e.__iterate(function(e,_,s){if(!(p&&(p=t.call(r,e,_,s))))return n++,a(e,o?_:n-1,i)}),n},a.__iteratorUncached=function(a,_){var i=this;if(_)return this.cacheResult().__iterator(a,_);var p=e.__iterator(vr,_),n=!0,s=0;return new E(function(){var e,_,l;do{if(e=p.next(),e.done)return o||a===zr?e:a===Er?z(a,s++,void 0,e):z(a,s++,e.value[1],e);var y=e.value;_=y[0],l=y[1],n&&(n=t.call(r,l,_,i));}while(n);return a===vr?e:z(a,_,l,e)})},a}function mt(e,t){var o=p(e),a=[e].concat(t).map(function(e){return i(e)?o&&(e=r(e)):e=o?B(e):j(Array.isArray(e)?e:[e]),e}).filter(function(e){return 0!==e.size});if(0===a.length)return e;if(1===a.length){var _=a[0];if(_===e||o&&p(_)||n(e)&&n(_))return _}var s=new L(a);return o?s=s.toKeyedSeq():!n(e)&&(s=s.toSetSeq()),s=s.flatten(!0),s.size=a.reduce(function(e,t){if(void 0!==e){var r=t.size;if(void 0!==r)return e+r}},0),s}function gt(e,t,r){var o=bt(e);return o.__iterateUncached=function(o,a){function _(e,s){var l=this;e.__iterate(function(e,a){return(!t||s<t)&&i(e)?_(e,s+1):!1===o(e,r?a:p++,l)&&(n=!0),!n},a);}var p=0,n=!1;return _(e,0),p},o.__iteratorUncached=function(o,a){var _=e.__iterator(o,a),p=[],n=0;return new E(function(){for(;_;){var e=_.next();if(!1!==e.done){_=p.pop();continue}var s=e.value;if(o===vr&&(s=s[1]),(!t||p.length<t)&&i(s))p.push(_),_=s.__iterator(o,a);else return r?e:z(o,n++,s,e)}return w()})},o}function St(e,t,r){var o=qt(e);return e.toSeq().map(function(a,_){return o(t.call(r,a,_,e))}).flatten(!0)}function It(e,t){var r=bt(e);return r.size=e.size&&2*e.size-1,r.__iterateUncached=function(r,o){var a=this,_=0;return e.__iterate(function(e){return(!_||!1!==r(t,_++,a))&&!1!==r(e,_++,a)},o),_},r.__iteratorUncached=function(r,o){var a,_=e.__iterator(zr,o),i=0;return new E(function(){return(!a||i%2)&&(a=_.next(),a.done)?a:i%2?z(r,i++,t):z(r,i++,a.value,a)})},r}function ft(e,t,r){t||(t=kt);var o=p(e),a=0,_=e.toSeq().map(function(t,o){return[o,t,a++,r?r(t,o,e):t]}).toArray();return _.sort(function(e,r){return t(e[3],r[3])||e[2]-r[2]}).forEach(o?function(e,t){_[t].length=2;}:function(e,t){_[t]=e[1];}),o?k(_):n(e)?O(_):A(_)}function Et(e,t,r){if(t||(t=kt),r){var o=e.toSeq().map(function(t,o){return[t,r(t,o,e)]}).reduce(function(e,r){return zt(t,e[1],r[1])?r:e});return o&&o[0]}return e.reduce(function(e,r){return zt(t,e,r)?r:e})}function zt(e,t,r){var o=e(r,t);return 0===o&&r!==t&&(r===void 0||null===r||r!==r)||0<o}function vt(e,r,o){var a=bt(e);return a.size=new L(o).map(function(e){return e.size}).min(),a.__iterate=function(e,t){for(var r,o=this.__iterator(zr,t),a=0;!(r=o.next()).done&&!1!==e(r.value,a++,this););return a},a.__iteratorUncached=function(e,a){var _=o.map(function(e){return e=t(e),x(a?e.reverse():e)}),i=0,p=!1;return new E(function(){var t;return p||(t=_.map(function(e){return e.next()}),p=t.some(function(e){return e.done})),p?w():z(e,i++,r.apply(null,t.map(function(e){return e.value})))})},a}function wt(e,t){return K(e)?t:e.constructor(t)}function Dt(e){if(e!==Object(e))throw new TypeError('Expected [K, V] tuple: '+e)}function xt(e){return le(e.size),u(e)}function qt(e){return p(e)?r:n(e)?o:a}function bt(e){return Object.create((p(e)?k:n(e)?O:A).prototype)}function Mt(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):M.prototype.cacheResult.call(this)}function kt(e,t){return e>t?1:e<t?-1:0}function Ot(e){var r=x(e);if(!r){if(!b(e))throw new TypeError('Expected iterable or array-like: '+e);r=x(t(e));}return r}function At(e,t){var r,o=function(_){if(_ instanceof o)return _;if(!(this instanceof o))return new o(_);if(!r){r=!0;var i=Object.keys(e);Rt(a,i),a.size=i.length,a._name=t,a._keys=i,a._defaultValues=e;}this._map=ye(_);},a=o.prototype=Object.create($r);return a.constructor=o,o}function Lt(e,t,r){var o=Object.create(Object.getPrototypeOf(e));return o._map=t,o.__ownerID=r,o}function Tt(e){return e._name||e.constructor.name||'Record'}function Rt(e,t){try{t.forEach(Nt.bind(void 0,e));}catch(e){}}function Nt(e,t){Object.defineProperty(e,t,{get:function get$$1(){return this.get(t)},set:function set$$1(e){Z(this.__ownerID,'Cannot set on an immutable record.'),this.set(t,e);}});}function Kt(e){return null===e||e===void 0?Wt():Ut(e)&&!l(e)?e:Wt().withMutations(function(t){var r=a(e);le(r.size),r.forEach(function(e){return t.add(e)});})}function Ut(e){return!!(e&&e[eo])}function Bt(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:0===t.size?e.__empty():e.__make(t)}function jt(e,t){var r=Object.create(to);return r.size=e?e.size:0,r._map=e,r.__ownerID=t,r}function Wt(){return ro||(ro=jt(ze()))}function Ht(e){return null===e||e===void 0?Pt():Ct(e)?e:Pt().withMutations(function(t){var r=a(e);le(r.size),r.forEach(function(e){return t.add(e)});})}function Ct(e){return Ut(e)&&l(e)}function Yt(e,t){var r=Object.create(oo);return r.size=e?e.size:0,r._map=e,r.__ownerID=t,r}function Pt(){return ao||(ao=Yt(tt()))}function Jt(e){return null===e||e===void 0?Qt():Vt(e)?e:Qt().unshiftAll(e)}function Vt(e){return!!(e&&e[_o])}function Xt(e,t,r,o){var a=Object.create(io);return a.size=e,a._head=t,a.__ownerID=r,a.__hash=o,a.__altered=!1,a}function Qt(){return po||(po=Xt(0))}function Ft(e,t){var r=function(r){e.prototype[r]=t[r];};return Object.keys(t).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(r),e}function Gt(e,t){return t}function Zt(e,t){return[t,e]}function $t(e){return function(){return!e.apply(this,arguments)}}function er(e){return function(){return-e.apply(this,arguments)}}function tr(e){return'string'==typeof e?JSON.stringify(e):e+''}function rr(){return c(arguments)}function or(e,t){return e<t?1:e>t?-1:0}function ar(e){if(e.size===Infinity)return 0;var t=l(e),r=p(e),o=t?1:0,a=e.__iterate(r?t?function(e,t){o=0|31*o+ir(_e(e),_e(t));}:function(e,t){o=0|o+ir(_e(e),_e(t));}:t?function(e){o=0|31*o+_e(e);}:function(e){o=0|o+_e(e);});return _r(a,o)}function _r(e,t){return t=Ar(t,3432918353),t=Ar(t<<15|t>>>-15,461845907),t=Ar(t<<13|t>>>-13,5),t=(0|t+3864292196)^e,t=Ar(t^t>>>16,2246822507),t=Ar(t^t>>>13,3266489909),t=ae(t^t>>>16),t}function ir(e,t){return 0|e^t+2654435769+(e<<6)+(e>>2)}var pr=Math.imul,nr=Math.max,sr=Array.prototype.slice;e(r,t),e(o,t),e(a,t),t.isIterable=i,t.isKeyed=p,t.isIndexed=n,t.isAssociative=s,t.isOrdered=l,t.Keyed=r,t.Indexed=o,t.Set=a;var lr='@@__IMMUTABLE_ITERABLE__@@',yr='@@__IMMUTABLE_KEYED__@@',dr='@@__IMMUTABLE_INDEXED__@@',cr='@@__IMMUTABLE_ORDERED__@@',ur='delete',hr=5,mr=1<<hr,gr=mr-1,Sr={},Ir={value:!1},fr={value:!1},Er=0,zr=1,vr=2,wr='function'==typeof Symbol&&Symbol.iterator,Dr='@@iterator',xr=wr||Dr;E.prototype.toString=function(){return'[Iterator]'},E.KEYS=Er,E.VALUES=zr,E.ENTRIES=vr,E.prototype.inspect=E.prototype.toSource=function(){return this.toString()},E.prototype[xr]=function(){return this},e(M,t),M.of=function(){return M(arguments)},M.prototype.toSeq=function(){return this},M.prototype.toString=function(){return this.__toString('Seq {','}')},M.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},M.prototype.__iterate=function(e,t){return C(this,e,t,!0)},M.prototype.__iterator=function(e,t){return Y(this,e,t,!0)},e(k,M),k.prototype.toKeyedSeq=function(){return this},e(O,M),O.of=function(){return O(arguments)},O.prototype.toIndexedSeq=function(){return this},O.prototype.toString=function(){return this.__toString('Seq [',']')},O.prototype.__iterate=function(e,t){return C(this,e,t,!1)},O.prototype.__iterator=function(e,t){return Y(this,e,t,!1)},e(A,M),A.of=function(){return A(arguments)},A.prototype.toSetSeq=function(){return this},M.isSeq=K,M.Keyed=k,M.Set=A,M.Indexed=O;var qr='@@__IMMUTABLE_SEQ__@@';M.prototype[qr]=!0,e(L,O),L.prototype.get=function(e,t){return this.has(e)?this._array[h(this,e)]:t},L.prototype.__iterate=function(e,t){for(var r=this._array,o=r.length-1,a=0;a<=o;a++)if(!1===e(r[t?o-a:a],a,this))return a+1;return a},L.prototype.__iterator=function(e,t){var r=this._array,o=r.length-1,a=0;return new E(function(){return a>o?w():z(e,a,r[t?o-a++:a++])})},e(T,k),T.prototype.get=function(e,t){return void 0===t||this.has(e)?this._object[e]:t},T.prototype.has=function(e){return this._object.hasOwnProperty(e)},T.prototype.__iterate=function(e,t){for(var r,o=this._object,a=this._keys,_=a.length-1,i=0;i<=_;i++)if(r=a[t?_-i:i],!1===e(o[r],r,this))return i+1;return i},T.prototype.__iterator=function(e,t){var r=this._object,o=this._keys,a=o.length-1,_=0;return new E(function(){var i=o[t?a-_:_];return _++>a?w():z(e,i,r[i])})},T.prototype[cr]=!0,e(R,O),R.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);var r=this._iterable,o=x(r),a=0;if(D(o))for(var _;!(_=o.next()).done&&!1!==e(_.value,a++,this););return a},R.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var r=this._iterable,o=x(r);if(!D(o))return new E(w);var a=0;return new E(function(){var t=o.next();return t.done?t:z(e,a++,t.value)})},e(N,O),N.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);for(var r=this._iterator,o=this._iteratorCache,a=0;a<o.length;)if(!1===e(o[a],a++,this))return a;for(var _,i;!(_=r.next()).done&&(i=_.value,o[a]=i,!1!==e(i,a++,this)););return a},N.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var r=this._iterator,o=this._iteratorCache,a=0;return new E(function(){if(a>=o.length){var t=r.next();if(t.done)return t;o[a]=t.value;}return z(e,a,o[a++])})};var br;e(G,O),G.prototype.toString=function(){return 0===this.size?'Repeat []':'Repeat [ '+this._value+' '+this.size+' times ]'},G.prototype.get=function(e,t){return this.has(e)?this._value:t},G.prototype.includes=function(e){return Q(this._value,e)},G.prototype.slice=function(e,t){var r=this.size;return g(e,t,r)?this:new G(this._value,I(t,r)-S(e,r))},G.prototype.reverse=function(){return this},G.prototype.indexOf=function(e){return Q(this._value,e)?0:-1},G.prototype.lastIndexOf=function(e){return Q(this._value,e)?this.size:-1},G.prototype.__iterate=function(e){for(var t=0;t<this.size;t++)if(!1===e(this._value,t,this))return t+1;return t},G.prototype.__iterator=function(e){var t=this,r=0;return new E(function(){return r<t.size?z(e,r++,t._value):w()})},G.prototype.equals=function(e){return e instanceof G?Q(this._value,e._value):F(e)};var Mr;e($,O),$.prototype.toString=function(){return 0===this.size?'Range []':'Range [ '+this._start+'...'+this._end+(1===this._step?'':' by '+this._step)+' ]'},$.prototype.get=function(e,t){return this.has(e)?this._start+h(this,e)*this._step:t},$.prototype.includes=function(e){var t=(e-this._start)/this._step;return 0<=t&&t<this.size&&t===Math.floor(t)},$.prototype.slice=function(e,t){return g(e,t,this.size)?this:(e=S(e,this.size),t=I(t,this.size),t<=e?new $(0,0):new $(this.get(e,this._end),this.get(t,this._end),this._step))},$.prototype.indexOf=function(e){var t=e-this._start;if(0==t%this._step){var r=t/this._step;if(0<=r&&r<this.size)return r}return-1},$.prototype.lastIndexOf=function(e){return this.indexOf(e)},$.prototype.__iterate=function(e,t){for(var r=this.size-1,o=this._step,a=t?this._start+r*o:this._start,_=0;_<=r;_++){if(!1===e(a,_,this))return _+1;a+=t?-o:o;}return _},$.prototype.__iterator=function(e,t){var r=this.size-1,o=this._step,a=t?this._start+r*o:this._start,_=0;return new E(function(){var i=a;return a+=t?-o:o,_>r?w():z(e,_++,i)})},$.prototype.equals=function(e){return e instanceof $?this._start===e._start&&this._end===e._end&&this._step===e._step:F(this,e)};var kr;e(ee,t),e(te,ee),e(re,ee),e(oe,ee),ee.Keyed=te,ee.Indexed=re,ee.Set=oe;var Or,Ar='function'==typeof pr&&!0?pr:function(e,t){e|=0,t|=0;var r=65535&e,o=65535&t;return 0|r*o+((e>>>16)*o+r*(t>>>16)<<16>>>0)},Lr=Object.isExtensible,Tr=function(){try{return Object.defineProperty({},'@',{}),!0}catch(t){return!1}}(),Rr='function'==typeof WeakMap;Rr&&(Or=new WeakMap);var Nr=0,Kr='__immutablehash__';'function'==typeof Symbol&&(Kr=Symbol(Kr));var Ur=16,Br=255,jr=0,Wr={};e(ye,te),ye.of=function(){var e=sr.call(arguments,0);return ze().withMutations(function(t){for(var r=0;r<e.length;r+=2){if(r+1>=e.length)throw new Error('Missing value for key: '+e[r]);t.set(e[r],e[r+1]);}})},ye.prototype.toString=function(){return this.__toString('Map {','}')},ye.prototype.get=function(e,t){return this._root?this._root.get(0,void 0,e,t):t},ye.prototype.set=function(e,t){return ve(this,e,t)},ye.prototype.setIn=function(e,t){return this.updateIn(e,Sr,function(){return t})},ye.prototype.remove=function(e){return ve(this,e,Sr)},ye.prototype.deleteIn=function(e){return this.updateIn(e,function(){return Sr})},ye.prototype.update=function(e,t,r){return 1===arguments.length?e(this):this.updateIn([e],t,r)},ye.prototype.updateIn=function(e,t,r){r||(r=t,t=void 0);var o=Te(this,Ot(e),t,r);return o===Sr?void 0:o},ye.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):ze()},ye.prototype.merge=function(){return ke(this,void 0,arguments)},ye.prototype.mergeWith=function(e){var t=sr.call(arguments,1);return ke(this,e,t)},ye.prototype.mergeIn=function(e){var t=sr.call(arguments,1);return this.updateIn(e,ze(),function(e){return'function'==typeof e.merge?e.merge.apply(e,t):t[t.length-1]})},ye.prototype.mergeDeep=function(){return ke(this,Oe,arguments)},ye.prototype.mergeDeepWith=function(e){var t=sr.call(arguments,1);return ke(this,Ae(e),t)},ye.prototype.mergeDeepIn=function(e){var t=sr.call(arguments,1);return this.updateIn(e,ze(),function(e){return'function'==typeof e.mergeDeep?e.mergeDeep.apply(e,t):t[t.length-1]})},ye.prototype.sort=function(e){return Ze(ft(this,e))},ye.prototype.sortBy=function(e,t){return Ze(ft(this,t,e))},ye.prototype.withMutations=function(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this},ye.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new d)},ye.prototype.asImmutable=function(){return this.__ensureOwner()},ye.prototype.wasAltered=function(){return this.__altered},ye.prototype.__iterator=function(e,t){return new Se(this,e,t)},ye.prototype.__iterate=function(e,t){var r=this,o=0;return this._root&&this._root.iterate(function(t){return o++,e(t[1],t[0],r)},t),o},ye.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Ee(this.size,this._root,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},ye.isMap=de;var Hr='@@__IMMUTABLE_MAP__@@',Cr=ye.prototype;Cr[Hr]=!0,Cr[ur]=Cr.remove,Cr.removeIn=Cr.deleteIn,ce.prototype.get=function(e,t,r,o){for(var a=this.entries,_=0,i=a.length;_<i;_++)if(Q(r,a[_][0]))return a[_][1];return o},ce.prototype.update=function(e,t,r,o,a,_,i){for(var p=a===Sr,n=this.entries,s=0,l=n.length;s<l&&!Q(o,n[s][0]);s++);var d=s<l;if(d?n[s][1]===a:p)return this;if(y(i),(p||!d)&&y(_),!(p&&1===n.length)){if(!d&&!p&&n.length>=Pr)return qe(e,n,o,a);var u=e&&e===this.ownerID,h=u?n:c(n);return d?p?s==l-1?h.pop():h[s]=h.pop():h[s]=[o,a]:h.push([o,a]),u?(this.entries=h,this):new ce(e,h)}},ue.prototype.get=function(e,t,r,o){t===void 0&&(t=_e(r));var a=1<<((0===e?t:t>>>e)&gr),_=this.bitmap;return 0==(_&a)?o:this.nodes[Re(_&a-1)].get(e+hr,t,r,o)},ue.prototype.update=function(e,t,r,o,a,_,i){r===void 0&&(r=_e(o));var p=(0===t?r:r>>>t)&gr,n=1<<p,s=this.bitmap,l=0!=(s&n);if(!l&&a===Sr)return this;var y=Re(s&n-1),d=this.nodes,c=l?d[y]:void 0,u=we(c,e,t+hr,r,o,a,_,i);if(u===c)return this;if(!l&&u&&d.length>=Jr)return Me(e,d,s,p,u);if(l&&!u&&2===d.length&&De(d[1^y]))return d[1^y];if(l&&u&&1===d.length&&De(u))return u;var h=e&&e===this.ownerID,m=l?u?s:s^n:s|n,g=l?u?Ne(d,y,u,h):Ue(d,y,h):Ke(d,y,u,h);return h?(this.bitmap=m,this.nodes=g,this):new ue(e,m,g)},he.prototype.get=function(e,t,r,o){t===void 0&&(t=_e(r));var a=(0===e?t:t>>>e)&gr,_=this.nodes[a];return _?_.get(e+hr,t,r,o):o},he.prototype.update=function(e,t,r,o,a,_,i){r===void 0&&(r=_e(o));var p=(0===t?r:r>>>t)&gr,n=this.nodes,s=n[p];if(a===Sr&&!s)return this;var l=we(s,e,t+hr,r,o,a,_,i);if(l===s)return this;var y=this.count;if(!s)y++;else if(!l&&(y--,y<Vr))return be(e,n,y,p);var d=e&&e===this.ownerID,c=Ne(n,p,l,d);return d?(this.count=y,this.nodes=c,this):new he(e,y,c)},me.prototype.get=function(e,t,r,o){for(var a=this.entries,_=0,i=a.length;_<i;_++)if(Q(r,a[_][0]))return a[_][1];return o},me.prototype.update=function(e,t,r,o,a,_,i){void 0===r&&(r=_e(o));var p=a===Sr;if(r!==this.keyHash)return p?this:(y(i),y(_),xe(this,e,t,r,[o,a]));for(var n=this.entries,s=0,l=n.length;s<l&&!Q(o,n[s][0]);s++);var d=s<l;if(d?n[s][1]===a:p)return this;if(y(i),(p||!d)&&y(_),p&&2===l)return new ge(e,this.keyHash,n[1^s]);var u=e&&e===this.ownerID,h=u?n:c(n);return d?p?s==l-1?h.pop():h[s]=h.pop():h[s]=[o,a]:h.push([o,a]),u?(this.entries=h,this):new me(e,this.keyHash,h)},ge.prototype.get=function(e,t,r,o){return Q(r,this.entry[0])?this.entry[1]:o},ge.prototype.update=function(e,t,r,o,a,_,i){var p=a===Sr,n=Q(o,this.entry[0]);return(n?a===this.entry[1]:p)?this:(y(i),p)?void y(_):n?e&&e===this.ownerID?(this.entry[1]=a,this):new ge(e,this.keyHash,[o,a]):(y(_),xe(this,e,t,_e(o),[o,a]))},ce.prototype.iterate=me.prototype.iterate=function(e,t){for(var r=this.entries,o=0,a=r.length-1;o<=a;o++)if(!1===e(r[t?a-o:o]))return!1},ue.prototype.iterate=he.prototype.iterate=function(e,t){for(var r,o=this.nodes,a=0,_=o.length-1;a<=_;a++)if(r=o[t?_-a:a],r&&!1===r.iterate(e,t))return!1},ge.prototype.iterate=function(e){return e(this.entry)},e(Se,E),Se.prototype.next=function(){for(var e=this._type,t=this._stack;t;){var r,o=t.node,a=t.index++;if(o.entry){if(0==a)return Ie(e,o.entry);}else if(o.entries){if(r=o.entries.length-1,a<=r)return Ie(e,o.entries[this._reverse?r-a:a]);}else if(r=o.nodes.length-1,a<=r){var _=o.nodes[this._reverse?r-a:a];if(_){if(_.entry)return Ie(e,_.entry);t=this._stack=fe(_,t);}continue}t=this._stack=this._stack.__prev;}return w()};var Yr,Pr=mr/4,Jr=mr/2,Vr=mr/4;e(Be,re),Be.of=function(){return this(arguments)},Be.prototype.toString=function(){return this.__toString('List [',']')},Be.prototype.get=function(e,t){if(e=h(this,e),0<=e&&e<this.size){e+=this._origin;var r=Xe(this,e);return r&&r.array[e&gr]}return t},Be.prototype.set=function(e,t){return Pe(this,e,t)},Be.prototype.remove=function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},Be.prototype.insert=function(e,t){return this.splice(e,0,t)},Be.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=hr,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Ye()},Be.prototype.push=function(){var e=arguments,t=this.size;return this.withMutations(function(r){Qe(r,0,t+e.length);for(var o=0;o<e.length;o++)r.set(t+o,e[o]);})},Be.prototype.pop=function(){return Qe(this,0,-1)},Be.prototype.unshift=function(){var e=arguments;return this.withMutations(function(t){Qe(t,-e.length);for(var r=0;r<e.length;r++)t.set(r,e[r]);})},Be.prototype.shift=function(){return Qe(this,1)},Be.prototype.merge=function(){return Fe(this,void 0,arguments)},Be.prototype.mergeWith=function(e){var t=sr.call(arguments,1);return Fe(this,e,t)},Be.prototype.mergeDeep=function(){return Fe(this,Oe,arguments)},Be.prototype.mergeDeepWith=function(e){var t=sr.call(arguments,1);return Fe(this,Ae(e),t)},Be.prototype.setSize=function(e){return Qe(this,0,e)},Be.prototype.slice=function(e,t){var r=this.size;return g(e,t,r)?this:Qe(this,S(e,r),I(t,r))},Be.prototype.__iterator=function(e,t){var r=0,o=He(this,t);return new E(function(){var t=o();return t===Gr?w():z(e,r++,t)})},Be.prototype.__iterate=function(e,t){for(var r,o=0,a=He(this,t);(r=a())!==Gr&&!(!1===e(r,o++,this)););return o},Be.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Ce(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):(this.__ownerID=e,this)},Be.isList=je;var Xr='@@__IMMUTABLE_LIST__@@',Qr=Be.prototype;Qr[Xr]=!0,Qr[ur]=Qr.remove,Qr.setIn=Cr.setIn,Qr.deleteIn=Qr.removeIn=Cr.removeIn,Qr.update=Cr.update,Qr.updateIn=Cr.updateIn,Qr.mergeIn=Cr.mergeIn,Qr.mergeDeepIn=Cr.mergeDeepIn,Qr.withMutations=Cr.withMutations,Qr.asMutable=Cr.asMutable,Qr.asImmutable=Cr.asImmutable,Qr.wasAltered=Cr.wasAltered,We.prototype.removeBefore=function(e,t,r){if(r===t?1<<t:0===this.array.length)return this;var o=r>>>t&gr;if(o>=this.array.length)return new We([],e);var a,_=0==o;if(0<t){var i=this.array[o];if(a=i&&i.removeBefore(e,t-hr,r),a===i&&_)return this}if(_&&!a)return this;var p=Ve(this,e);if(!_)for(var n=0;n<o;n++)p.array[n]=void 0;return a&&(p.array[o]=a),p},We.prototype.removeAfter=function(e,t,r){if(r===(t?1<<t:0)||0===this.array.length)return this;var o=r-1>>>t&gr;if(o>=this.array.length)return this;var a;if(0<t){var _=this.array[o];if(a=_&&_.removeAfter(e,t-hr,r),a===_&&o==this.array.length-1)return this}var i=Ve(this,e);return i.array.splice(o+1),a&&(i.array[o]=a),i};var Fr,Gr={};e(Ze,ye),Ze.of=function(){return this(arguments)},Ze.prototype.toString=function(){return this.__toString('OrderedMap {','}')},Ze.prototype.get=function(e,t){var r=this._map.get(e);return r===void 0?t:this._list.get(r)[1]},Ze.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):tt()},Ze.prototype.set=function(e,t){return rt(this,e,t)},Ze.prototype.remove=function(e){return rt(this,e,Sr)},Ze.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Ze.prototype.__iterate=function(e,t){var r=this;return this._list.__iterate(function(t){return t&&e(t[1],t[0],r)},t)},Ze.prototype.__iterator=function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},Ze.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),r=this._list.__ensureOwner(e);return e?et(t,r,e,this.__hash):(this.__ownerID=e,this._map=t,this._list=r,this)},Ze.isOrderedMap=$e,Ze.prototype[cr]=!0,Ze.prototype[ur]=Ze.prototype.remove;var Zr;e(ot,k),ot.prototype.get=function(e,t){return this._iter.get(e,t)},ot.prototype.has=function(e){return this._iter.has(e)},ot.prototype.valueSeq=function(){return this._iter.valueSeq()},ot.prototype.reverse=function(){var e=this,t=st(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},ot.prototype.map=function(e,t){var r=this,o=nt(this,e,t);return this._useKeys||(o.valueSeq=function(){return r._iter.toSeq().map(e,t)}),o},ot.prototype.__iterate=function(e,t){var r,o=this;return this._iter.__iterate(this._useKeys?function(t,r){return e(t,r,o)}:(r=t?xt(this):0,function(a){return e(a,t?--r:r++,o)}),t)},ot.prototype.__iterator=function(e,t){if(this._useKeys)return this._iter.__iterator(e,t);var r=this._iter.__iterator(zr,t),o=t?xt(this):0;return new E(function(){var a=r.next();return a.done?a:z(e,t?--o:o++,a.value,a)})},ot.prototype[cr]=!0,e(at,O),at.prototype.includes=function(e){return this._iter.includes(e)},at.prototype.__iterate=function(e,t){var r=this,o=0;return this._iter.__iterate(function(t){return e(t,o++,r)},t)},at.prototype.__iterator=function(e,t){var r=this._iter.__iterator(zr,t),o=0;return new E(function(){var t=r.next();return t.done?t:z(e,o++,t.value,t)})},e(_t,A),_t.prototype.has=function(e){return this._iter.includes(e)},_t.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate(function(t){return e(t,t,r)},t)},_t.prototype.__iterator=function(e,t){var r=this._iter.__iterator(zr,t);return new E(function(){var t=r.next();return t.done?t:z(e,t.value,t.value,t)})},e(it,k),it.prototype.entrySeq=function(){return this._iter.toSeq()},it.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate(function(t){if(t){Dt(t);var o=i(t);return e(o?t.get(1):t[1],o?t.get(0):t[0],r)}},t)},it.prototype.__iterator=function(e,t){var r=this._iter.__iterator(zr,t);return new E(function(){for(;;){var t=r.next();if(t.done)return t;var o=t.value;if(o){Dt(o);var a=i(o);return z(e,a?o.get(0):o[0],a?o.get(1):o[1],t)}}})},at.prototype.cacheResult=ot.prototype.cacheResult=_t.prototype.cacheResult=it.prototype.cacheResult=Mt,e(At,te),At.prototype.toString=function(){return this.__toString(Tt(this)+' {','}')},At.prototype.has=function(e){return this._defaultValues.hasOwnProperty(e)},At.prototype.get=function(e,t){if(!this.has(e))return t;var r=this._defaultValues[e];return this._map?this._map.get(e,r):r},At.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var e=this.constructor;return e._empty||(e._empty=Lt(this,ze()))},At.prototype.set=function(e,t){if(!this.has(e))throw new Error('Cannot set unknown key "'+e+'" on '+Tt(this));if(this._map&&!this._map.has(e)){var r=this._defaultValues[e];if(t===r)return this}var o=this._map&&this._map.set(e,t);return this.__ownerID||o===this._map?this:Lt(this,o)},At.prototype.remove=function(e){if(!this.has(e))return this;var t=this._map&&this._map.remove(e);return this.__ownerID||t===this._map?this:Lt(this,t)},At.prototype.wasAltered=function(){return this._map.wasAltered()},At.prototype.__iterator=function(e,t){var o=this;return r(this._defaultValues).map(function(e,t){return o.get(t)}).__iterator(e,t)},At.prototype.__iterate=function(e,t){var o=this;return r(this._defaultValues).map(function(e,t){return o.get(t)}).__iterate(e,t)},At.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map&&this._map.__ensureOwner(e);return e?Lt(this,t,e):(this.__ownerID=e,this._map=t,this)};var $r=At.prototype;$r[ur]=$r.remove,$r.deleteIn=$r.removeIn=Cr.removeIn,$r.merge=Cr.merge,$r.mergeWith=Cr.mergeWith,$r.mergeIn=Cr.mergeIn,$r.mergeDeep=Cr.mergeDeep,$r.mergeDeepWith=Cr.mergeDeepWith,$r.mergeDeepIn=Cr.mergeDeepIn,$r.setIn=Cr.setIn,$r.update=Cr.update,$r.updateIn=Cr.updateIn,$r.withMutations=Cr.withMutations,$r.asMutable=Cr.asMutable,$r.asImmutable=Cr.asImmutable,e(Kt,oe),Kt.of=function(){return this(arguments)},Kt.fromKeys=function(e){return this(r(e).keySeq())},Kt.prototype.toString=function(){return this.__toString('Set {','}')},Kt.prototype.has=function(e){return this._map.has(e)},Kt.prototype.add=function(e){return Bt(this,this._map.set(e,!0))},Kt.prototype.remove=function(e){return Bt(this,this._map.remove(e))},Kt.prototype.clear=function(){return Bt(this,this._map.clear())},Kt.prototype.union=function(){var e=sr.call(arguments,0);return e=e.filter(function(e){return 0!==e.size}),0===e.length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations(function(t){for(var r=0;r<e.length;r++)a(e[r]).forEach(function(e){return t.add(e)});}):this.constructor(e[0])},Kt.prototype.intersect=function(){var e=sr.call(arguments,0);if(0===e.length)return this;e=e.map(function(e){return a(e)});var t=this;return this.withMutations(function(r){t.forEach(function(t){e.every(function(e){return e.includes(t)})||r.remove(t);});})},Kt.prototype.subtract=function(){var e=sr.call(arguments,0);if(0===e.length)return this;e=e.map(function(e){return a(e)});var t=this;return this.withMutations(function(r){t.forEach(function(t){e.some(function(e){return e.includes(t)})&&r.remove(t);});})},Kt.prototype.merge=function(){return this.union.apply(this,arguments)},Kt.prototype.mergeWith=function(){var e=sr.call(arguments,1);return this.union.apply(this,e)},Kt.prototype.sort=function(e){return Ht(ft(this,e))},Kt.prototype.sortBy=function(e,t){return Ht(ft(this,t,e))},Kt.prototype.wasAltered=function(){return this._map.wasAltered()},Kt.prototype.__iterate=function(e,t){var r=this;return this._map.__iterate(function(t,o){return e(o,o,r)},t)},Kt.prototype.__iterator=function(e,t){return this._map.map(function(e,t){return t}).__iterator(e,t)},Kt.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):(this.__ownerID=e,this._map=t,this)},Kt.isSet=Ut;var eo='@@__IMMUTABLE_SET__@@',to=Kt.prototype;to[eo]=!0,to[ur]=to.remove,to.mergeDeep=to.merge,to.mergeDeepWith=to.mergeWith,to.withMutations=Cr.withMutations,to.asMutable=Cr.asMutable,to.asImmutable=Cr.asImmutable,to.__empty=Wt,to.__make=jt;var ro;e(Ht,Kt),Ht.of=function(){return this(arguments)},Ht.fromKeys=function(e){return this(r(e).keySeq())},Ht.prototype.toString=function(){return this.__toString('OrderedSet {','}')},Ht.isOrderedSet=Ct;var oo=Ht.prototype;oo[cr]=!0,oo.__empty=Pt,oo.__make=Yt;var ao;e(Jt,re),Jt.of=function(){return this(arguments)},Jt.prototype.toString=function(){return this.__toString('Stack [',']')},Jt.prototype.get=function(e,t){var r=this._head;for(e=h(this,e);r&&e--;)r=r.next;return r?r.value:t},Jt.prototype.peek=function(){return this._head&&this._head.value},Jt.prototype.push=function(){if(0===arguments.length)return this;for(var e=this.size+arguments.length,t=this._head,r=arguments.length-1;0<=r;r--)t={value:arguments[r],next:t};return this.__ownerID?(this.size=e,this._head=t,this.__hash=void 0,this.__altered=!0,this):Xt(e,t)},Jt.prototype.pushAll=function(e){if(e=o(e),0===e.size)return this;le(e.size);var t=this.size,r=this._head;return e.reverse().forEach(function(e){t++,r={value:e,next:r};}),this.__ownerID?(this.size=t,this._head=r,this.__hash=void 0,this.__altered=!0,this):Xt(t,r)},Jt.prototype.pop=function(){return this.slice(1)},Jt.prototype.unshift=function(){return this.push.apply(this,arguments)},Jt.prototype.unshiftAll=function(e){return this.pushAll(e)},Jt.prototype.shift=function(){return this.pop.apply(this,arguments)},Jt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Qt()},Jt.prototype.slice=function(e,t){if(g(e,t,this.size))return this;var r=S(e,this.size),o=I(t,this.size);if(o!==this.size)return re.prototype.slice.call(this,e,t);for(var a=this.size-r,_=this._head;r--;)_=_.next;return this.__ownerID?(this.size=a,this._head=_,this.__hash=void 0,this.__altered=!0,this):Xt(a,_)},Jt.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Xt(this.size,this._head,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},Jt.prototype.__iterate=function(e,t){if(t)return this.reverse().__iterate(e);for(var r=0,o=this._head;o&&!(!1===e(o.value,r++,this));)o=o.next;return r},Jt.prototype.__iterator=function(e,t){if(t)return this.reverse().__iterator(e);var r=0,o=this._head;return new E(function(){if(o){var t=o.value;return o=o.next,z(e,r++,t)}return w()})},Jt.isStack=Vt;var _o='@@__IMMUTABLE_STACK__@@',io=Jt.prototype;io[_o]=!0,io.withMutations=Cr.withMutations,io.asMutable=Cr.asMutable,io.asImmutable=Cr.asImmutable,io.wasAltered=Cr.wasAltered;var po;t.Iterator=E,Ft(t,{toArray:function toArray$$1(){le(this.size);var e=Array(this.size||0);return this.valueSeq().__iterate(function(t,r){e[r]=t;}),e},toIndexedSeq:function toIndexedSeq(){return new at(this)},toJS:function toJS(){return this.toSeq().map(function(e){return e&&'function'==typeof e.toJS?e.toJS():e}).__toJS()},toJSON:function toJSON(){return this.toSeq().map(function(e){return e&&'function'==typeof e.toJSON?e.toJSON():e}).__toJS()},toKeyedSeq:function toKeyedSeq(){return new ot(this,!0)},toMap:function toMap(){return ye(this.toKeyedSeq())},toObject:function toObject(){le(this.size);var e={};return this.__iterate(function(t,r){e[r]=t;}),e},toOrderedMap:function toOrderedMap(){return Ze(this.toKeyedSeq())},toOrderedSet:function toOrderedSet(){return Ht(p(this)?this.valueSeq():this)},toSet:function toSet(){return Kt(p(this)?this.valueSeq():this)},toSetSeq:function toSetSeq(){return new _t(this)},toSeq:function toSeq(){return n(this)?this.toIndexedSeq():p(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function toStack(){return Jt(p(this)?this.valueSeq():this)},toList:function toList(){return Be(p(this)?this.valueSeq():this)},toString:function toString(){return'[Iterable]'},__toString:function __toString(e,t){return 0===this.size?e+t:e+' '+this.toSeq().map(this.__toStringMapper).join(', ')+' '+t},concat:function concat(){var e=sr.call(arguments,0);return wt(this,mt(this,e))},includes:function includes(e){return this.some(function(t){return Q(t,e)})},entries:function entries(){return this.__iterator(vr)},every:function every(e,t){le(this.size);var r=!0;return this.__iterate(function(o,a,_){if(!e.call(t,o,a,_))return r=!1,!1}),r},filter:function filter(e,t){return wt(this,lt(this,e,t,!0))},find:function find(e,t,r){var o=this.findEntry(e,t);return o?o[1]:r},forEach:function forEach(e,t){return le(this.size),this.__iterate(t?e.bind(t):e)},join:function join(e){le(this.size),e=void 0===e?',':''+e;var t='',r=!0;return this.__iterate(function(o){r?r=!1:t+=e,t+=null!==o&&void 0!==o?o.toString():'';}),t},keys:function keys(){return this.__iterator(Er)},map:function map(e,t){return wt(this,nt(this,e,t))},reduce:function reduce(e,t,r){le(this.size);var o,a;return 2>arguments.length?a=!0:o=t,this.__iterate(function(t,_,i){a?(a=!1,o=t):o=e.call(r,o,t,_,i);}),o},reduceRight:function reduceRight(){var e=this.toKeyedSeq().reverse();return e.reduce.apply(e,arguments)},reverse:function reverse(){return wt(this,st(this,!0))},slice:function slice(e,t){return wt(this,ct(this,e,t,!0))},some:function some(e,t){return!this.every($t(e),t)},sort:function sort(e){return wt(this,ft(this,e))},values:function values(){return this.__iterator(zr)},butLast:function butLast(){return this.slice(0,-1)},isEmpty:function isEmpty(){return this.size===void 0?!this.some(function(){return!0}):0===this.size},count:function count(e,t){return u(e?this.toSeq().filter(e,t):this)},countBy:function countBy(e,t){return yt(this,e,t)},equals:function equals(e){return F(this,e)},entrySeq:function entrySeq(){var e=this;if(e._cache)return new L(e._cache);var t=e.toSeq().map(Zt).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function filterNot(e,t){return this.filter($t(e),t)},findEntry:function findEntry(e,t,r){var o=r;return this.__iterate(function(r,a,_){if(e.call(t,r,a,_))return o=[a,r],!1}),o},findKey:function findKey(e,t){var r=this.findEntry(e,t);return r&&r[0]},findLast:function findLast(e,t,r){return this.toKeyedSeq().reverse().find(e,t,r)},findLastEntry:function findLastEntry(e,t,r){return this.toKeyedSeq().reverse().findEntry(e,t,r)},findLastKey:function findLastKey(e,t){return this.toKeyedSeq().reverse().findKey(e,t)},first:function first(){return this.find(m)},flatMap:function flatMap(e,t){return wt(this,St(this,e,t))},flatten:function flatten(e){return wt(this,gt(this,e,!0))},fromEntrySeq:function fromEntrySeq(){return new it(this)},get:function get$$1(e,t){return this.find(function(t,r){return Q(r,e)},void 0,t)},getIn:function getIn(e,t){for(var r,o,a=this,_=Ot(e);!(r=_.next()).done;)if(o=r.value,a=a&&a.get?a.get(o,Sr):Sr,a===Sr)return t;return a},groupBy:function groupBy(e,t){return dt(this,e,t)},has:function has(e){return this.get(e,Sr)!==Sr},hasIn:function hasIn(e){return this.getIn(e,Sr)!==Sr},isSubset:function isSubset(e){return e='function'==typeof e.includes?e:t(e),this.every(function(t){return e.includes(t)})},isSuperset:function isSuperset(e){return e='function'==typeof e.isSubset?e:t(e),e.isSubset(this)},keyOf:function keyOf(e){return this.findKey(function(t){return Q(t,e)})},keySeq:function keySeq(){return this.toSeq().map(Gt).toIndexedSeq()},last:function last(){return this.toSeq().reverse().first()},lastKeyOf:function lastKeyOf(e){return this.toKeyedSeq().reverse().keyOf(e)},max:function max(e){return Et(this,e)},maxBy:function maxBy(e,t){return Et(this,t,e)},min:function min(e){return Et(this,e?er(e):or)},minBy:function minBy(e,t){return Et(this,t?er(t):or,e)},rest:function rest(){return this.slice(1)},skip:function skip(e){return this.slice(nr(0,e))},skipLast:function skipLast(e){return wt(this,this.toSeq().reverse().skip(e).reverse())},skipWhile:function skipWhile(e,t){return wt(this,ht(this,e,t,!0))},skipUntil:function skipUntil(e,t){return this.skipWhile($t(e),t)},sortBy:function sortBy(e,t){return wt(this,ft(this,t,e))},take:function take(e){return this.slice(0,nr(0,e))},takeLast:function takeLast(e){return wt(this,this.toSeq().reverse().take(e).reverse())},takeWhile:function takeWhile(e,t){return wt(this,ut(this,e,t))},takeUntil:function takeUntil(e,t){return this.takeWhile($t(e),t)},valueSeq:function valueSeq(){return this.toIndexedSeq()},hashCode:function hashCode(){return this.__hash||(this.__hash=ar(this))}});var no=t.prototype;no[lr]=!0,no[xr]=no.values,no.__toJS=no.toArray,no.__toStringMapper=tr,no.inspect=no.toSource=function(){return this.toString()},no.chain=no.flatMap,no.contains=no.includes,Ft(r,{flip:function flip(){return wt(this,pt(this))},mapEntries:function mapEntries(e,t){var r=this,o=0;return wt(this,this.toSeq().map(function(a,_){return e.call(t,[_,a],o++,r)}).fromEntrySeq())},mapKeys:function mapKeys(e,t){var r=this;return wt(this,this.toSeq().flip().map(function(o,a){return e.call(t,o,a,r)}).flip())}});var so=r.prototype;so[yr]=!0,so[xr]=no.entries,so.__toJS=no.toObject,so.__toStringMapper=function(e,t){return JSON.stringify(t)+': '+tr(e)},Ft(o,{toKeyedSeq:function toKeyedSeq(){return new ot(this,!1)},filter:function filter(e,t){return wt(this,lt(this,e,t,!1))},findIndex:function findIndex(e,t){var r=this.findEntry(e,t);return r?r[0]:-1},indexOf:function indexOf(e){var t=this.keyOf(e);return t===void 0?-1:t},lastIndexOf:function lastIndexOf(e){var t=this.lastKeyOf(e);return t===void 0?-1:t},reverse:function reverse(){return wt(this,st(this,!1))},slice:function slice(e,t){return wt(this,ct(this,e,t,!1))},splice:function splice(e,t){var r=arguments.length;if(t=nr(0|t,0),0===r||2===r&&!t)return this;e=S(e,0>e?this.count():this.size);var o=this.slice(0,e);return wt(this,1===r?o:o.concat(c(arguments,2),this.slice(e+t)))},findLastIndex:function findLastIndex(e,t){var r=this.findLastEntry(e,t);return r?r[0]:-1},first:function first(){return this.get(0)},flatten:function flatten(e){return wt(this,gt(this,e,!1))},get:function get$$1(e,t){return e=h(this,e),0>e||this.size===Infinity||void 0!==this.size&&e>this.size?t:this.find(function(t,r){return r===e},void 0,t)},has:function has(e){return e=h(this,e),0<=e&&(void 0===this.size?-1!==this.indexOf(e):this.size===Infinity||e<this.size)},interpose:function interpose(e){return wt(this,It(this,e))},interleave:function interleave(){var e=[this].concat(c(arguments)),t=vt(this.toSeq(),O.of,e),r=t.flatten(!0);return t.size&&(r.size=t.size*e.length),wt(this,r)},keySeq:function keySeq(){return $(0,this.size)},last:function last(){return this.get(-1)},skipWhile:function skipWhile(e,t){return wt(this,ht(this,e,t,!1))},zip:function zip(){var e=[this].concat(c(arguments));return wt(this,vt(this,rr,e))},zipWith:function zipWith(e){var t=c(arguments);return t[0]=this,wt(this,vt(this,e,t))}}),o.prototype[dr]=!0,o.prototype[cr]=!0,Ft(a,{get:function get$$1(e,t){return this.has(e)?e:t},includes:function includes(e){return this.has(e)},keySeq:function keySeq(){return this.valueSeq()}}),a.prototype.has=no.includes,a.prototype.contains=a.prototype.includes,Ft(k,r.prototype),Ft(O,o.prototype),Ft(A,a.prototype),Ft(te,r.prototype),Ft(re,o.prototype),Ft(oe,a.prototype);return{Iterable:t,Seq:M,Collection:ee,Map:ye,OrderedMap:Ze,List:Be,Stack:Jt,Set:Kt,OrderedSet:Ht,Record:At,Range:$,Repeat:G,is:Q,fromJS:P}});});

var typed=createCommonjsModule(function(a,b){(function(a,c){c(b,immutable);})(commonjsGlobal,function(a){'use strict';function b(a,b){for(var c=Object.getOwnPropertyNames(b),d=0;d<c.length;d++){var e=c[d],f=Object.getOwnPropertyDescriptor(b,e);f&&f.configurable&&a[e]===void 0&&Object.defineProperty(a,e,f);}return a}function c(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function d(a,c){if('function'!=typeof c&&null!==c)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof c?'undefined':_typeof(c)));a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):b(a,c));}function e(){}var f=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c);}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=function(a,b,c){var d=!0;_function:for(;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(h===void 0){var i=Object.getPrototypeOf(e);if(null===i)return;a=i,b=f,c=g,d=!0,h=i=void 0;continue _function}else{if('value'in h)return h.value;var j=h.get;return void 0===j?void 0:j.call(g)}}};if('undefined'==typeof h){var h=function(a){return'@@'+a};h['for']=h;}a.construct=function(a){return e.prototype=a.constructor.prototype,new e};var i=h['for']('typed/type'),j=h['for']('typed/store'),k=h['for']('typed/empty'),l=h['for']('typed/type/maybe'),m=h['for']('typed/type/default'),n=h['for']('typed/type/label'),o=h['for']('transducer/init'),p=h['for']('transducer/result'),q=h['for']('transducer/step'),r=h['for']('typed/type/read'),s=h['for']('typed/type/parse'),t=h('typed/type/name'),u=h('typed/type/signature'),v=function(a,b,e){var f=function(a){function b(a){c(this,b),g(Object.getPrototypeOf(b.prototype),'constructor',this).call(this),this[m]=a;}return d(b,a),b}(x),h=f.prototype;h[m]=e,h[s]=b,h[n]=a;var i=function(a){return void 0===a?h:new f(a)};return i.prototype=h,i};a.Typed=v,v.label=n,v.defaultValue=m,v.read=r,v.typeName=t,v.typeSignature=u,v.type=i,v.store=j,v.init=o,v.result=p,v.step=q,v.DELETE='delete',v.empty=k;var w=function(a){return a[t]()},x=function(){function a(){c(this,a);}return f(a,[{key:v.read,value:function(){var a=0>=arguments.length||void 0===arguments[0]?this[m]:arguments[0];return this[s](a)}},{key:v.parse,value:function(){throw TypeError('Type implementation must implement "[read.symbol]" method')}},{key:v.typeName,value:function(){var a=this[n],b=this[m];return void 0===b?a:a+'('+JSON.stringify(b)+')'}}]),a}();a.Type=x;var y=Object.prototype,z=Array.isArray||function(a){return'[object Array]'===y.toString.call(a)},A=function(a){return'[object RegExp]'===y.toString.call(a)},B=function(a){var b=1>=arguments.length||arguments[1]===void 0?'undefined'==typeof a?'undefined':_typeof(a):arguments[1];return function(){return void 0===a?a:null===a?a:a[r]?a:a.prototype&&a.prototype[r]?a.prototype:'number'===b?new v.Number(a):'string'===b?new v.String(a):'boolean'===b?new v.Boolean(a):'symbol'===b?new v.Symbol(a):z(a)?v.Array(a):A(a)?new v.RegExp(a):a===String?v.String.prototype:a===Number?v.Number.prototype:a===Boolean?v.Boolean.prototype:a===RegExp?v.RegExp.prototype:a===Array?v.Array.prototype:a===h?v.Symbol.prototype:a===Date?v.Date.prototype:C}()};a.typeOf=B;var C=v('Any',function(a){return a})();a.Any=C,v.Any=C,v.Number=v('Number',function(a){return'number'==typeof a?a:TypeError('"'+a+'" is not a number')}),v.String=v('String',function(a){return'string'==typeof a?a:TypeError('"'+a+'" is not a string')}),v.Symbol=v('Symbol',function(a){return'symbol'===('undefined'==typeof a?'undefined':_typeof(a))?a:TypeError('"'+a+'" is not a symbol')}),v.Array=v('Array',function(a){return z(a)?a:TypeError('"'+a+'" is not an array')}),v.RegExp=v('RegExp',function(a){return a instanceof RegExp?a:TypeError('"'+a+'" is not a regexp')}),v.Boolean=v('Boolean',function(a){return!(!0!==a)||!1!==a&&TypeError('"'+a+'" is not a boolean')}),v.Date=v('Date',function(a){var b=new Date(a);return isNaN(b.valueOf())?new TypeError('"'+a+'" is not a valid date.'):b});var D=function(a){function b(a){c(this,b),g(Object.getPrototypeOf(b.prototype),'constructor',this).call(this),this[i]=a;}return d(b,a),f(b,[{key:v.typeName,value:function(){return'Maybe('+this[i][t]()+')'}},{key:v.read,value:function(a){var b=null==a?null:this[i][r](a);return b instanceof TypeError?TypeError('"'+a+'" is not nully nor it is of '+this[i][t]()+' type'):b}}]),b}(x),E=function(a){var b=B(a);if(b===C)throw TypeError(a+' is not a valid type');return b[l]||(b[l]=new D(b))};a.Maybe=E,E.Type=D;var F=function(a){function b(a){c(this,b),g(Object.getPrototypeOf(b.prototype),'constructor',this).call(this),this[i]=a;}return d(b,a),f(b,[{key:v.typeName,value:function(){return'Union('+this[i].map(w).join(', ')+')'}},{key:v.read,value:function(a){for(var b,c=this[i],d=c.length,e=0;e<d;){if(b=c[e],a instanceof b.constructor)return a;++e;}for(e=0;e<d;){var f=c[e][r](a);if(!(f instanceof TypeError))return f;++e;}return TypeError('"'+a+'" does not satisfy '+this[t]()+' type')}}]),b}(x),G=function(a,b){return a.filter(function(a){return 0>b.indexOf(a)})},H=function(a,b){if(a.length>b.length){var c=G(b,a);return 0===c.length?a:a.concat(c)}var c=G(a,b);return 0===c.length?b:c.concat(b)},I=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];var d=b.length;if(0===d)throw TypeError('Union must be of at at least one type');for(var e=null,f=null,g=0;g<d;){var h=B(b[g]);if(h===C)return C;if(!e)f=h,e=f instanceof F?f[i]:[h];else if(0>e.indexOf(h))if(h instanceof F){var j=H(e,h[i]);j===h[i]?(f=h,e=j):j!==e&&(f=null,e=j);}else f=null,e.push(h);++g;}return f?f:new F(e)};a.Union=I,I.Type=F,v.Number.Range=function(a,b,c){return void 0===b&&(b=+Infinity),v('Typed.Number.Range('+a+'..'+b+')',function(c){return'number'==typeof c?c>=a&&c<=b?c:TypeError('"'+c+'" isn\'t in the range of '+a+'..'+b):TypeError('"'+c+'" is not a number')},c)};});});

var record=createCommonjsModule(function(a,b){(function(a,c){c(b,typed,immutable);})(commonjsGlobal,function(a,b,c){'use strict';function d(a,b){for(var c=Object.getOwnPropertyNames(b),d=0;d<c.length;d++){var e=c[d],f=Object.getOwnPropertyDescriptor(b,e);f&&f.configurable&&a[e]===void 0&&Object.defineProperty(a,e,f);}return a}function e(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function f(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function g(a,b){if('function'!=typeof b&&null!==b)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof b?'undefined':_typeof(b)));a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):d(a,b));}var h=function(){function a(a,b){var c,d=[],e=!0,f=!1;try{for(var g,h=a[Symbol.iterator]();!(e=(g=h.next()).done)&&(d.push(g.value),!(b&&d.length===b));e=!0);}catch(a){f=!0,c=a;}finally{try{!e&&h['return']&&h['return']();}finally{if(f)throw c}}return d}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError('Invalid attempt to destructure non-iterable instance')}}(),i=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c);}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=function(a,b,c){var d=!0;_function:for(;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(h===void 0){var i=Object.getPrototypeOf(e);if(null===i)return;a=i,b=f,c=g,d=!0,h=i=void 0;continue _function}else{if('value'in h)return h.value;var j=h.get;return void 0===j?void 0:j.call(g)}}},k=c.Iterable.Keyed,l=function(a){return function(){return this.get(a)}},m=function(a){return function(b){if(!this.__ownerID)throw TypeError('Cannot set on an immutable record.');this.set(a,b);}},n=b.Typed.store,o=b.Typed.type,p=b.Typed.step,q=b.Typed.init,r=b.Typed.result,s=b.Typed.read,t=b.Typed.label,u=b.Typed.empty,v=b.Typed.typeName,w=b.Typed.typeSignature,x=function(){};x.prototype=c.Iterable.Keyed.prototype;var y=function(a){function d(){f(this,d),j(Object.getPrototypeOf(d.prototype),'constructor',this).call(this);}return g(d,a),i(d,[{key:b.Typed.init,value:function(){return(0,b.construct)(this).asMutable()}},{key:b.Typed.result,value:function(a){return a.asImmutable()}},{key:b.Typed.read,value:function(a){var b=this.constructor;if(a&&a instanceof b)return a;if(null===a||a&&'object'!==('undefined'==typeof a?'undefined':_typeof(a)))return TypeError('Invalid data structure "'+a+'" was passed to '+this[v]());var d=(0,c.Seq)(a),e=this[o],f=0===d.size;if(f&&this[u])return this[u];var g;for(var h in e){var i=e[h],j=d.has(h)?d.get(h):this.get(h),k=i[s](j);if(k instanceof TypeError)return TypeError('Invalid value for "'+h+'" field:\n '+k.message);g=this[p](g||this[q](),[h,k]);}return g=this[r](g),f&&(this[u]=g),g}},{key:b.Typed.step,value:function(a,d){var e=h(d,2),f=e[0],g=e[1],i=a[n]?a[n].set(f,g):new c.Map([[f,g]]);if(a[n]===i)return a;var j=a.__ownerID?a:(0,b.construct)(a);return j[n]=i,j}},{key:b.Typed.typeSignature,value:function(){var a=this[o],b=[];for(var c in a)b.push(c+': '+a[c][v]());return'Typed.Record({'+b.join(', ')+'})'}},{key:b.Typed.typeName,value:function(){return this[t]||this[w]()}},{key:'toString',value:function(){return this.__toString(this[v]()+'({','})')}},{key:'has',value:function(a){return!!this[o][a]}},{key:'get',value:function(a,b){return this[o][a]?this[n]?this[n].get(a,b):b:b}},{key:'clear',value:function(){return this.__ownerID?(this[n]&&this[n].clear(),this):this[u]||(this[u]=new this.constructor)}},{key:'remove',value:function(a){return this[o][a]?this.set(a,void 0):this}},{key:'set',value:function(a,b){var c=this[o][a];if(!c)throw TypeError('Cannot set unknown field "'+a+'" on "'+this[v]()+'"');var d=c[s](b);if(d instanceof TypeError)throw TypeError('Invalid value for '+a+' field: '+d.message);return this[p](this,[a,d])}},{key:'__iterator',value:function(a,b){var c=this;return k(this[o]).map(function(a,b){return c.get(b)}).__iterator(a,b)}},{key:'__iterate',value:function(a,b){var c=this;return k(this[o]).map(function(a,b){return c.get(b)}).__iterate(a,b)}},{key:'__ensureOwner',value:function(a){if(a===this.__ownerID)return this;var c=this[n]&&this[n].__ensureOwner(a),d=a?(0,b.construct)(this):this;return d.__ownerID=a,d[n]=c,d}},{key:'wasAltered',value:function(){return this[n].wasAltered()}}]),d}(x),z=function(a,c){if(a&&'object'===('undefined'==typeof a?'undefined':_typeof(a))){var d=Object.create(null),f=Object.keys(a),g=f.length;if(0<g){var h,i=function(){for(var i=(h={size:{value:g}},e(h,o,{value:d}),e(h,t,{value:c}),h),j=0;j<g;){var k=f[j],p=(0,b.typeOf)(a[k]);if(p)d[k]=p,i[k]={get:l(k),set:m(k),enumerable:!0};else throw TypeError('Invalid field descriptor provided for a "'+k+'" field');++j;}var q=function a(b){var c=this instanceof a,d=c?this.constructor:a;if(b instanceof d)return b;var e=d.prototype,f=e[s](b);if(f instanceof TypeError)throw f;return c?void(this[n]=f[n]):f};i.constructor={value:q},q.prototype=Object.create(A,i);q.prototype;return{v:q}}();if('object'===('undefined'==typeof i?'undefined':_typeof(i)))return i.v}else throw TypeError('Typed.Record descriptor must define at least one field')}else throw TypeError('Typed.Record must be passed a descriptor of fields')};a.Record=z,z.Type=y,z.prototype=y.prototype;var A=y.prototype;A[b.Typed.DELETE]=A.remove,A.deleteIn=c.Map.prototype.deleteIn,A.removeIn=c.Map.prototype.removeIn,A.merge=c.Map.prototype.merge,A.mergeWith=c.Map.prototype.mergeWith,A.mergeIn=c.Map.prototype.mergeIn,A.mergeDeep=c.Map.prototype.mergeDeep,A.mergeDeepWith=c.Map.prototype.mergeDeepWith,A.mergeDeepIn=c.Map.prototype.mergeDeepIn,A.setIn=c.Map.prototype.setIn,A.update=c.Map.prototype.update,A.updateIn=c.Map.prototype.updateIn,A.withMutations=c.Map.prototype.withMutations,A.asMutable=c.Map.prototype.asMutable,A.asImmutable=c.Map.prototype.asImmutable,A.map=void 0,A.filter=void 0,A.filterNot=void 0,A.flip=void 0,A.mapKeys=void 0,A.mapEntries=void 0,A.sort=void 0,A.sortBy=void 0,A.reverse=void 0,A.slice=void 0,A.butLast=void 0,A.flatMap=void 0,A.flatten=void 0,A.rest=void 0,A.skip=void 0,A.skipLast=void 0,A.skipWhile=void 0,A.skipUntil=void 0,A.sortBy=void 0,A.take=void 0,A.takeLast=void 0,A.takeWhile=void 0,A.takeUntil=void 0;});});

var list=createCommonjsModule(function(a,b){(function(a,c){c(b,typed,immutable);})(commonjsGlobal,function(a,b,c){'use strict';function d(a,b){for(var c=Object.getOwnPropertyNames(b),d=0;d<c.length;d++){var e=c[d],f=Object.getOwnPropertyDescriptor(b,e);f&&f.configurable&&a[e]===void 0&&Object.defineProperty(a,e,f);}return a}function e(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function f(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function g(a,b){if('function'!=typeof b&&null!==b)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof b?'undefined':_typeof(b)));a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):d(a,b));}function h(){}var i=function(){function a(a,b){var c,d=[],e=!0,f=!1;try{for(var g,h=a[Symbol.iterator]();!(e=(g=h.next()).done)&&(d.push(g.value),!(b&&d.length===b));e=!0);}catch(a){f=!0,c=a;}finally{try{!e&&h['return']&&h['return']();}finally{if(f)throw c}}return d}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError('Invalid attempt to destructure non-iterable instance')}}(),j=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c);}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k=function(a,b,c){var d=!0;_function:for(;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(h===void 0){var i=Object.getPrototypeOf(e);if(null===i)return;a=i,b=f,c=g,d=!0,h=i=void 0;continue _function}else{if('value'in h)return h.value;var j=h.get;return void 0===j?void 0:j.call(g)}}},l=c.List,m=c.Iterable.Indexed,n=b.Typed.store,o=b.Typed.type,p=b.Typed.read,q=b.Typed.step,r=b.Typed.init,s=b.Typed.result,t=b.Typed.label,u=b.Typed.typeName,v=b.Typed.empty,w=function(a,c){var d=c(a[n]);if(d===a[n])return a;var e=a.__ownerID?a:(0,b.construct)(a);return e[n]=d,e.size=d.size,e},x=function(a){return a.clear()},y=function(a){return a.pop()},z=function(a){return a.shift()},A=function(a){function c(){f(this,c),k(Object.getPrototypeOf(c.prototype),'constructor',this).apply(this,arguments);}return g(c,a),j(c,[{key:b.Typed.typeName,value:function(){return'TypeInferer'}},{key:b.Typed.read,value:function(a){var c=(0,b.typeOf)(a).constructor.prototype;return this.type=this.type?(0,b.Union)(this.type,c):c,a}}]),c}(b.Type);h.prototype=l.prototype;var B=function(a){function c(a){return f(this,c),k(Object.getPrototypeOf(c.prototype),'constructor',this).call(this),c.prototype[p](a)}return g(c,a),j(c,null,[{key:'from',value:function(a){var c=(0,b.construct)(this.prototype);return c[n]=a[n],c.size=a.size,c}}]),j(c,[{key:b.Typed.init,value:function(){var a=(0,b.construct)(this).asMutable();return a[o]=new A,a}},{key:b.Typed.result,value:function(a){var b=a.asImmutable();return b[o]=a[o].type,b}},{key:b.Typed.read,value:function(a){var c=this.constructor;if(null===a||void 0===a){if(!this[v]){var d=(0,b.construct)(this);d[n]=l(),d.size=0,this[v]=d;}return this[v]}if(a instanceof c&&a&&a.constructor===c)return a;var e=m(a),f=0===e.size;if(f&&this[v])return this[v];var g=this[r]();return g.size=e.size,e.forEach(function(a,b){g.set(b,a);}),g=this[s](g),f&&(this[v]=g),g}},{key:b.Typed.step,value:function(a,b){var c=i(b,2),d=c[0],e=c[1];return w(a,function(){var a=0>=arguments.length||void 0===arguments[0]?l():arguments[0];return a.set(d,e)})}},{key:b.Typed.typeName,value:function(){return this[t]||'Typed.List('+this[o][u]()+')'}},{key:'toString',value:function(){return this.__toString(this[u]()+'([','])')}},{key:'has',value:function(a){return this[n].has(a)}},{key:'get',value:function(a,b){return this[n]?this[n].get(parseInt(a),b):b}},{key:'clear',value:function(){return this.__ownerID?w(this,x):this[v]||this[p]()}},{key:'insert',value:function(a,b){if(a>this.size)throw TypeError('Index "'+a+'" is out of bounds.');var c=this[o][p](b);if(c instanceof TypeError)throw TypeError('Invalid value: '+c.message);return w(this,function(c){return c.insert(a,b)})}},{key:'remove',value:function(a){return w(this,function(b){return b&&b.remove(a)})}},{key:'set',value:function(a,b){if(a>this.size)throw TypeError('Index "'+a+'" is out of bounds.');var c=this[o][p](b);if(c instanceof TypeError)throw TypeError('Invalid value: '+c.message);return this[q](this,[a,c])}},{key:'push',value:function(){for(var a=this[o],b=[],c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];for(var f=d.length,g=0;g<f;){var h=d[g],i=a[p](h);if(i instanceof TypeError)throw TypeError('Invalid value: '+i.message);b.push(i),++g;}return w(this,function(a){return a?a.push.apply(a,b):l.apply(void 0,b)})}},{key:'pop',value:function(){return w(this,y)}},{key:'unshift',value:function(){for(var a=this[o],b=[],c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];for(var f=d.length,g=0;g<f;){var h=d[g],i=a[p](h);if(i instanceof TypeError)throw TypeError('Invalid value: '+i.message);b.push(i),++g;}return w(this,function(a){return a?a.unshift.apply(a,b):l.apply(void 0,b)})}},{key:'shift',value:function(){return w(this,z)}},{key:'setSize',value:function(a){if(a>this.size)throw TypeError('setSize may only downsize');return w(this,function(b){return b.setSize(a)})}},{key:'slice',value:function(a,b){return w(this,function(c){return c&&c.slice(a,b)})}},{key:'wasAltered',value:function(){return this[n].wasAltered()}},{key:'__ensureOwner',value:function(a){var c=this.__ownerID===a?this:a?(0,b.construct)(this):this;return c.__ownerID=a,c[n]=this[n]?this[n].__ensureOwner(a):l().__ensureOwner(a),c.size=c[n].size,c}},{key:'__iterator',value:function(a,b){var c=this;return m(this[n]).map(function(a,b){return c.get(b)}).__iterator(a,b)}},{key:'__iterate',value:function(a,b){var c=this;return m(this[n]).map(function(a,b){return c.get(b)}).__iterate(a,b)}}]),c}(h);B.prototype[b.Typed.DELETE]=B.prototype.remove;var C=function(){};C.prototype=B.prototype;var D=function(a){function c(){f(this,c),k(Object.getPrototypeOf(c.prototype),'constructor',this).call(this);}return g(c,a),j(c,[{key:b.Typed.init,value:function(){return(0,b.construct)(this).asMutable()}},{key:b.Typed.result,value:function(a){return a.asImmutable()}},{key:'map',value:function(a,c){if(0===this.size)return this;var d=B.from(this).map(a,c);if(this[n]===d[n])return this;if(d[o]===this[o]){var e=(0,b.construct)(this);return e[n]=d[n],e.size=d.size,e}return d}},{key:'flatMap',value:function(a,c){if(0===this.size)return this;var d=B.from(this).flatMap(a,c);if(this[n]===d[n])return this;if(d[o]===this[o]){var e=(0,b.construct)(this);return e[n]=d[n],e.size=d.size,e}return d}}]),c}(C),E=function(a,d){var f;if(void 0===a)throw TypeError('Typed.List must be passed a type descriptor');if(a===b.Any)return c.List;var g=(0,b.typeOf)(a);if(g===b.Any)throw TypeError('Typed.List was passed an invalid type descriptor: '+a);var h=function a(b){var c=this instanceof a,d=c?this.constructor:a;if(b instanceof d)return b;var e=d.prototype[p](b);if(e instanceof TypeError)throw e;if(c&&!this[n])this[n]=e[n],this.size=e.size;else return e;return this};return h.of=l.of,h.prototype=Object.create(F,(f={constructor:{value:h}},e(f,o,{value:g}),e(f,t,{value:d}),f)),h};a.List=E,E.Type=D,E.prototype=D.prototype;var F=D.prototype;});});

var map=createCommonjsModule(function(a,b){(function(a,c){c(b,typed,immutable);})(commonjsGlobal,function(a,b,c){'use strict';function d(a,b){for(var c=Object.getOwnPropertyNames(b),d=0;d<c.length;d++){var e=c[d],f=Object.getOwnPropertyDescriptor(b,e);f&&f.configurable&&a[e]===void 0&&Object.defineProperty(a,e,f);}return a}function e(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function f(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function g(a,b){if('function'!=typeof b&&null!==b)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof b?'undefined':_typeof(b)));a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):d(a,b));}var h=function(){function a(a,b){var c,d=[],e=!0,f=!1;try{for(var g,h=a[Symbol.iterator]();!(e=(g=h.next()).done)&&(d.push(g.value),!(b&&d.length===b));e=!0);}catch(a){f=!0,c=a;}finally{try{!e&&h['return']&&h['return']();}finally{if(f)throw c}}return d}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError('Invalid attempt to destructure non-iterable instance')}}(),i=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c);}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=function(a,b,c){var d=!0;_function:for(;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(h===void 0){var i=Object.getPrototypeOf(e);if(null===i)return;a=i,b=f,c=g,d=!0,h=i=void 0;continue _function}else{if('value'in h)return h.value;var j=h.get;return void 0===j?void 0:j.call(g)}}},k=c.Map,l=c.Iterable.Keyed,m=b.Typed.store,n=b.Typed.type,o=b.Typed.read,p=b.Typed.step,q=b.Typed.init,r=b.Typed.result,s=b.Typed.label,t=b.Typed.typeName,u=b.Typed.empty,v=function(a){function c(a,b,d){f(this,c),j(Object.getPrototypeOf(c.prototype),'constructor',this).call(this),this.key=a,this.value=b,this.label=d;}return g(c,a),i(c,[{key:b.Typed.typeName,value:function(){return this.label||this.key[t]()+', '+this.value[t]()}},{key:b.Typed.read,value:function(a){function b(){return a.apply(this,arguments)}return b.toString=function(){return a.toString()},b}(function(a){var b=h(a,2),c=b[0],d=b[1],e=this.key[o](c);if(e instanceof TypeError)return TypeError('Invalid key: '+e.message);var f=this.value[o](d);return f instanceof TypeError?TypeError('Invalid value: '+f.message):[e,f]})}]),c}(b.Type),w=function(a){function c(){f(this,c),j(Object.getPrototypeOf(c.prototype),'constructor',this).call(this,key,value);}return g(c,a),i(c,[{key:'toStatic',value:function(){return new MapEntryType(this.key,this.value)}},{key:b.Typed.typeName,value:function(){var a=this.key?this.key[t]():'TypeInferred',b=this.value?this.value[t]():'TypeInferred';return a+', '+b}},{key:b.Typed.read,value:function(a){var c=(0,b.typeOf)(a[0]).constructor.prototype;this.key=this.key?(0,b.Union)(this.key,c):c;var d=(0,b.typeOf)(a[1]).constructor.prototype;return this.value=this.value?(0,b.Union)(this.value,d):d,a}}]),c}(v),x=function(){};x.prototype=c.Map.prototype;var y=function(a){function c(a){return f(this,c),j(Object.getPrototypeOf(c.prototype),'constructor',this).call(this),c.prototype[o](a)}return g(c,a),i(c,[{key:'advance',value:function(a){var c=a.__ownerID?this:(0,b.construct)(this);return c[m]=a,c.size=a.size,c.__ownerID=a.__ownerID,c}},{key:b.Typed.init,value:function(){return this.advance(k()).asMutable()}},{key:b.Typed.step,value:function(a,b){var c=this[n][o](b);if(c instanceof TypeError)throw c;var d=h(c,2),e=d[0],f=d[1];return a.advance(a[m].set(e,f))}},{key:b.Typed.result,value:function(a){return a.asImmutable()}},{key:b.Typed.read,value:function(a){var b=this.constructor;if(null===a||void 0===a)return this[u]||(this[u]=this.advance(k())),this[u];var c=a instanceof b&&a.constructor===b;if(c)return a;for(var d=l(a).entries(),e=this[n],f=this[q]();;){var g=d.next(),h=g.done,i=g.value;if(h)break;var j=e[o](i);if(j instanceof TypeError)return j;f=f[p](f,j);}return this[r](f)}},{key:b.Typed.typeName,value:function(){return this[s]||'Typed.Map('+this[n][t]()+')'}},{key:'toString',value:function(){return this.__toString(this[t]()+'({','})')}},{key:'has',value:function(a){return this[m].has(a)}},{key:'get',value:function(a,b){return this[m].get(a,b)}},{key:'clear',value:function(){return 0===this.size?this:this.__ownerID?this.advance(this[m].clear()):this[u]||this[o]()}},{key:'remove',value:function(a){return this.advance(this[m].remove(a))}},{key:'set',value:function(a,b){return this[p](this,[a,b])}},{key:'wasAltered',value:function(){return this[m].wasAltered()}},{key:'__ensureOwner',value:function(a){var c=this.__ownerID===a?this:a?(0,b.construct)(this):this,d=this[m].__ensureOwner(a);return c[m]=d,c.size=d.size,c.__ownerID=a,c}},{key:'__iterator',value:function(a,b){return this[m].__iterator(a,b)}},{key:'__iterate',value:function(a,b){return this[m].__iterate(a,b)}}]),c}(x);y.prototype[b.Typed.DELETE]=y.prototype.remove;var z=function(a){function c(){f(this,c),j(Object.getPrototypeOf(c.prototype),'constructor',this).call(this);}return g(c,a),i(c,[{key:b.Typed.init,value:function(){var a=this.advance(k()).asMutable();return a[n]=new w,a}},{key:b.Typed.result,value:function(a){var b=a.asImmutable();return b[n]=a[n].toStatic(),b}}]),c}(y),A=function(a,c,d){var f;if(void 0===a)throw TypeError('Typed.Map must be passed a key type descriptor');if(void 0===c)throw TypeError('Typed.Map must be passed a value type descriptor');if(a===b.Any&&c===b.Any)return k;var g=(0,b.typeOf)(a),h=(0,b.typeOf)(c);if(g===b.Any&&a!==b.Any)throw TypeError('Typed.Map was passed an invalid key type descriptor: '+a);if(h===b.Any&&c!==b.Any)throw TypeError('Typed.Map was passed an invalid value type descriptor: '+c);var i=new v(g,h,d),j=function a(b){var c=this instanceof a,d=c?this.constructor:a;if(b instanceof d)return b;var e=d.prototype[o](b);if(e instanceof TypeError)throw e;if(c&&!this[m])this[m]=e[m],this.size=e.size;else return e;return this};return j.of=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return j().withMutations(function(a){for(var c=0;c<b.length;c+=2){if(c+1>=b.length)throw new Error('Missing value for key: '+b[c]);a.set(b[c],b[c+1]);}})},j.prototype=Object.create(B,(f={constructor:{value:j}},e(f,n,{value:i}),e(f,s,{value:d}),f)),j};a.Map=A,A.Type=y,A.prototype=y.prototype;var B=A.prototype;});});

var lib$1=createCommonjsModule(function(a,b){(function(a,c){c(b,record,list,map,typed);})(commonjsGlobal,function(a,b,c,d,e){'use strict';Object.defineProperty(a,'Record',{enumerable:!0,get:function(){return b.Record}}),Object.defineProperty(a,'List',{enumerable:!0,get:function(){return c.List}}),Object.defineProperty(a,'Map',{enumerable:!0,get:function(){return d.Map}}),Object.defineProperty(a,'Typed',{enumerable:!0,get:function(){return e.Typed}}),Object.defineProperty(a,'typeOf',{enumerable:!0,get:function(){return e.typeOf}}),Object.defineProperty(a,'Type',{enumerable:!0,get:function(){return e.Type}}),Object.defineProperty(a,'Any',{enumerable:!0,get:function(){return e.Any}}),Object.defineProperty(a,'Union',{enumerable:!0,get:function(){return e.Union}}),Object.defineProperty(a,'Maybe',{enumerable:!0,get:function(){return e.Maybe}});});});var lib_1=lib$1.Typed;var lib_2=lib$1.Record;var lib_3=lib$1.List;var lib_4=lib$1.Map;var lib_5=lib$1.Any;

var funcTag='[object Function]';
var genTag='[object GeneratorFunction]';
var objectProto=Object.prototype;
var objectToString=objectProto.toString;function isFunction(a){var b=isObject(a)?objectToString.call(a):'';return b==funcTag||b==genTag}function isObject(a){var b='undefined'==typeof a?'undefined':_typeof(a);return!!a&&('object'==b||'function'==b)}var lodash_isfunction=isFunction;

function isNull(a){return null===a}var lodash_isnull=isNull;

function isUndefined(a){return a===void 0}var lodash_isundefined=isUndefined;

var lodash_isdate=createCommonjsModule(function(a,b){function c(a){return!!a&&'object'==('undefined'==typeof a?'undefined':_typeof(a))}var d='object'==_typeof(commonjsGlobal)&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,e=b&&!b.nodeType&&b,f=e&&!0&&a&&!a.nodeType&&a,g=f&&f.exports===e,h=g&&d.process,i=function(){try{return h&&h.binding('util')}catch(a){}}(),j=i&&i.isDate,k=Object.prototype,l=k.toString,m=j?function(a){return function(b){return a(b)}}(j):function(a){return c(a)&&l.call(a)=='[object Date]'};a.exports=m;});

var INFINITY=1/0; var MAX_SAFE_INTEGER=9007199254740991; var MAX_INTEGER=1.7976931348623157e308; var NAN=0/0; var symbolTag='[object Symbol]'; var reTrim=/^\s+|\s+$/g; var reIsBadHex=/^[-+]0x[0-9a-f]+$/i; var reIsBinary=/^0b[01]+$/i; var reIsOctal=/^0o[0-7]+$/i; var rsAstralRange='\\ud800-\\udfff'; var rsComboMarksRange='\\u0300-\\u036f\\ufe20-\\ufe23'; var rsComboSymbolsRange='\\u20d0-\\u20f0'; var rsVarRange='\\ufe0e\\ufe0f'; var rsAstral='['+rsAstralRange+']'; var rsCombo='['+rsComboMarksRange+rsComboSymbolsRange+']'; var rsFitz='\\ud83c[\\udffb-\\udfff]'; var rsModifier='(?:'+rsCombo+'|'+rsFitz+')'; var rsNonAstral='[^'+rsAstralRange+']'; var rsRegional='(?:\\ud83c[\\udde6-\\uddff]){2}'; var rsSurrPair='[\\ud800-\\udbff][\\udc00-\\udfff]'; var rsZWJ='\\u200d'; var reOptMod=rsModifier+'?'; var rsOptVar='['+rsVarRange+']?'; var rsOptJoin='(?:'+rsZWJ+'(?:'+[rsNonAstral,rsRegional,rsSurrPair].join('|')+')'+rsOptVar+reOptMod+')*'; var rsSeq=rsOptVar+reOptMod+rsOptJoin; var rsSymbol='(?:'+[rsNonAstral+rsCombo+'?',rsCombo,rsRegional,rsSurrPair,rsAstral].join('|')+')'; var reUnicode=RegExp(rsFitz+'(?='+rsFitz+')|'+rsSymbol+rsSeq,'g'); var reHasUnicode=/[\u200d\ud800-\udfff\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0\ufe0e\ufe0f]/; var freeParseInt=parseInt; var freeGlobal='object'==_typeof(commonjsGlobal)&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal; var freeSelf='object'==('undefined'==typeof self?'undefined':_typeof(self))&&self&&self.Object===Object&&self; var root=freeGlobal||freeSelf||Function('return this')(); var asciiSize=baseProperty('length');function asciiToArray(a){return a.split('')}function baseProperty(a){return function(b){return null==b?void 0:b[a]}}function hasUnicode(a){return reHasUnicode.test(a)}function stringSize(a){return hasUnicode(a)?unicodeSize(a):asciiSize(a)}function stringToArray(a){return hasUnicode(a)?unicodeToArray(a):asciiToArray(a)}function unicodeSize(a){for(var b=reUnicode.lastIndex=0;reUnicode.test(a);)b++;return b}function unicodeToArray(a){return a.match(reUnicode)||[]}var objectProto$1=Object.prototype; var objectToString$1=objectProto$1.toString; var _Symbol=root.Symbol; var nativeCeil=Math.ceil; var nativeFloor=Math.floor; var symbolProto=_Symbol?_Symbol.prototype:void 0; var symbolToString=symbolProto?symbolProto.toString:void 0;function baseRepeat(a,b){var c='';if(!a||1>b||b>MAX_SAFE_INTEGER)return c;do b%2&&(c+=a),b=nativeFloor(b/2),b&&(a+=a);while(b);return c}function baseSlice(a,b,c){var d=-1,e=a.length;0>b&&(b=-b>e?0:e+b),c=c>e?e:c,0>c&&(c+=e),e=b>c?0:c-b>>>0,b>>>=0;for(var f=Array(e);++d<e;)f[d]=a[d+b];return f}function baseToString(a){if('string'==typeof a)return a;if(isSymbol(a))return symbolToString?symbolToString.call(a):'';var b=a+'';return'0'==b&&1/a==-INFINITY?'-0':b}function castSlice(a,b,c){var d=a.length;return c=void 0===c?d:c,!b&&c>=d?a:baseSlice(a,b,c)}function createPadding(a,b){b=b===void 0?' ':baseToString(b);var c=b.length;if(2>c)return c?baseRepeat(b,a):b;var d=baseRepeat(b,nativeCeil(a/stringSize(b)));return hasUnicode(b)?castSlice(stringToArray(d),0,a).join(''):d.slice(0,a)}function isObject$1(a){var b='undefined'==typeof a?'undefined':_typeof(a);return!!a&&('object'==b||'function'==b)}function isObjectLike(a){return!!a&&'object'==('undefined'==typeof a?'undefined':_typeof(a))}function isSymbol(a){return'symbol'==('undefined'==typeof a?'undefined':_typeof(a))||isObjectLike(a)&&objectToString$1.call(a)==symbolTag}function toFinite(a){if(!a)return 0===a?a:0;if(a=toNumber(a),a===INFINITY||a===-INFINITY){var b=0>a?-1:1;return b*MAX_INTEGER}return a===a?a:0}function toInteger(a){var b=toFinite(a),c=b%1;return b===b?c?b-c:b:0}function toNumber(a){if('number'==typeof a)return a;if(isSymbol(a))return NAN;if(isObject$1(a)){var b='function'==typeof a.valueOf?a.valueOf():a;a=isObject$1(b)?b+'':b;}if('string'!=typeof a)return 0===a?a:+a;a=a.replace(reTrim,'');var c=reIsBinary.test(a);return c||reIsOctal.test(a)?freeParseInt(a.slice(2),c?2:8):reIsBadHex.test(a)?NAN:+a}function toString(a){return null==a?'':baseToString(a)}function padStart(a,b,c){a=toString(a),b=toInteger(b);var d=b?stringSize(a):0;return b&&d<b?createPadding(b-d,c)+a:a}var lodash_padstart=padStart;

var formatDate = (function(a){return a.getFullYear()+lodash_padstart(a.getMonth()+1,2,0)+lodash_padstart(a.getDate(),2,0)});

var formatTime = (function(a){return lodash_padstart(a.getHours(),2,0)+lodash_padstart(a.getMinutes(),2,0)+lodash_padstart(a.getSeconds(),2,0)});

var formatDateTime = (function(a){return formatDate(a)+'T'+formatTime(a)});

var removeTimeZoneOffset = (function(a){var b=6e4*a.getTimezoneOffset();return new Date(a.getTime()+b)});

var BOOLEAN=function(a){return a?'TRUE':'FALSE'};var DATE=function(a){return lodash_isdate(a)?formatDate(removeTimeZoneOffset(a)):a};var DATETIME=function(a){return lodash_isdate(a)?formatDateTime(a):a};var FLOAT=function(a){return Number.parseFloat(a)};var FLOAT__FIXED_1=function(){return FLOAT.apply(void 0,arguments).toFixed(1)};var INTEGER=function(a){return Number.parseInt(a)};var TEXT=function(a){return a.toString().replace(/\\/g,'\\\\').replace(/,/g,'\\,').replace(/;/g,'\\;').replace(/\n/g,'\\n')};var TIME=function(a){return lodash_isdate(a)?formatTime(removeTimeZoneOffset(a)):a};

var transformers = Object.freeze({
	BOOLEAN: BOOLEAN,
	DATE: DATE,
	DATETIME: DATETIME,
	FLOAT: FLOAT,
	FLOAT__FIXED_1: FLOAT__FIXED_1,
	INTEGER: INTEGER,
	TEXT: TEXT,
	TIME: TIME
});

var FOLD_SEPARATOR='\r\n ';var LINE_SEPARATOR='\r\n';var PARAMETER_SEPARATOR=';';var PARAMETER_KV_SEPARATOR='=';var PARAMETER_VALUE_KEY='VALUE';var PROPERTY_KV_SEPARATOR=':';var VALUE_SEPARATOR=',';var FOLD_REGEX=new RegExp(/[\s\S]{1,73}/g);var PREFIX='BEGIN';var SUFFIX='END';var VALUE_TYPES={BINARY:'BINARY',BOOLEAN:'BOOLEAN',CALADDRESS:'CALADDRESS',"CAL-ADDRESS":'CALADDRESS',DATE:'DATE',DATETIME:'DATETIME',"DATE-TIME":'DATETIME',DURATION:'DURATION',FLOAT:'FLOAT',INTEGER:'INTEGER',PERIOD:'PERIOD',RECUR:'RECUR',TEXT:'TEXT',TIME:'TIME',URI:'URI',UTCOFFSET:'UTCOFFSET',"UTC-OFFSET":'UTCOFFSET'};var DEFAULT_VALUE_TYPE=VALUE_TYPES.TEXT;var DEFAULT_VALUE_TYPES={ATTACH:VALUE_TYPES.URI,ATTENDEE:VALUE_TYPES.CALADDRESS,CREATED:VALUE_TYPES.DATETIME,DTSTART:VALUE_TYPES.DATETIME,DTEND:VALUE_TYPES.DATETIME,DTSTAMP:VALUE_TYPES.DATETIME,DUE:VALUE_TYPES.DATETIME,DURATION:VALUE_TYPES.DURATION,EXDATE:VALUE_TYPES.DATETIME,FREEBUSY:VALUE_TYPES.PERIOD,"LAST-MODIFIED":VALUE_TYPES.DATETIME,ORGANIZER:VALUE_TYPES.CALADDRESS,"PERCENT-COMPLETE":VALUE_TYPES.INTEGER,PRIORITY:VALUE_TYPES.INTEGER,RDATE:VALUE_TYPES.DATETIME,"RECURRENCE-ID":VALUE_TYPES.DATETIME,REPEAT:VALUE_TYPES.INTEGER,RRULE:VALUE_TYPES.RECUR,SEQUENCE:VALUE_TYPES.INTEGER,TRIGGER:VALUE_TYPES.DURATION,TZOFFSETFROM:VALUE_TYPES.UTCOFFSET,TZOFFSETTO:VALUE_TYPES.UTCOFFSET,TZURL:VALUE_TYPES.URI,URL:VALUE_TYPES.URI,VERSION:VALUE_TYPES.FLOAT+'__FIXED_1'};

var Property=function(a){function b(){return classCallCheck(this,b),possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return inherits(b,a),createClass(b,[{key:'getTransformedValue',value:function getTransformedValue(){var a=this,b=VALUE_TYPES[this.parameters.get(PARAMETER_VALUE_KEY)]||DEFAULT_VALUE_TYPES[this.name]||DEFAULT_VALUE_TYPE,c=transformers[b];return lodash_isfunction(c)?Array.isArray(this.value)?this.value.map(function(b){return c(b,a.parameters)}).join(VALUE_SEPARATOR):c(this.value,this.parameters):this.value}},{key:'toString',value:function toString(){var a=this.name;0<this.parameters.size&&(a+=PARAMETER_SEPARATOR+this.parameters.entrySeq().map(function(a){var b=slicedToArray(a,2),c=b[0],d=b[1];return c+PARAMETER_KV_SEPARATOR+d}).join(PARAMETER_SEPARATOR));var b=this.transform?this.getTransformedValue():this.value;return lodash_isnull(b)||lodash_isundefined(b)||(a+=PROPERTY_KV_SEPARATOR+b),a.match(FOLD_REGEX).join(FOLD_SEPARATOR)}}]),b}(lib_2({name:String,parameters:lib_4(String,lib_5),transform:!0,value:lib_5}));

lib_1.Component=lib_1('Component',function(a){return a instanceof Component?a:TypeError('"'+a+'" is not a Component')}),lib_1.Property=lib_1('Property',function(a){return a instanceof Property?a:TypeError('"'+a+'" is not a Property')});var Component=function(a){function b(){return classCallCheck(this,b),possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return inherits(b,a),createClass(b,[{key:'pushComponent',value:function pushComponent(a){return this.update('components',function(b){return b.push(a)})}},{key:'pushProperty',value:function pushProperty(a){return this.update('properties',function(b){return b.push(a)})}},{key:'clear',value:function clear(){return this.clearComponents().clearProperties()}},{key:'clearComponents',value:function clearComponents(){return this.remove('components')}},{key:'clearProperties',value:function clearProperties(){return this.remove('properties')}},{key:'toString',value:function toString(){return[new Property({name:PREFIX,value:this.name})].concat(toConsumableArray(this.properties),toConsumableArray(this.components),[new Property({name:SUFFIX,value:this.name})]).join(LINE_SEPARATOR)}}]),b}(lib_2({name:String,components:lib_3(lib_1.Component),properties:lib_3(lib_1.Property)}));

exports.Component = Component;
exports.Property = Property;

Object.defineProperty(exports, '__esModule', { value: true });

})));
//# sourceMappingURL=immutable-ics.umd.js.map
